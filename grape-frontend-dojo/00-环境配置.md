# 00-环境配置

## 📋 学习目标
- 配置现代前端开发环境
- 掌握常用开发工具
- 理解Node.js版本管理
- 配置编辑器和插件

## 🔧 Node.js环境

### 安装Node.js
```bash
# 方式1：官网下载安装
# https://nodejs.org/

# 方式2：使用nvm（推荐）
# macOS/Linux
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# Windows
# 下载nvm-windows: https://github.com/coreybutler/nvm-windows

# 安装指定版本
nvm install 20
nvm install 18

# 切换版本
nvm use 20

# 查看已安装版本
nvm list

# 设置默认版本
nvm alias default 20
```

### npm配置
```bash
# 查看配置
npm config list

# 设置镜像源（淘宝镜像）
npm config set registry https://registry.npmmirror.com

# 还原官方源
npm config set registry https://registry.npmjs.org

# 全局安装路径
npm config get prefix

# 缓存路径
npm config get cache

# 清理缓存
npm cache clean --force
```

### 包管理器

#### pnpm（推荐）
```bash
# 安装pnpm
npm install -g pnpm

# 设置镜像
pnpm config set registry https://registry.npmmirror.com

# 创建项目
pnpm create vite my-app
pnpm create vue@latest

# 安装依赖
pnpm install
pnpm add react
pnpm add -D typescript

# 运行脚本
pnpm dev
pnpm build
```

#### Yarn
```bash
# 安装Yarn
npm install -g yarn

# 设置镜像
yarn config set registry https://registry.npmmirror.com

# 使用
yarn install
yarn add react
yarn dev
```

## 📝 编辑器配置

### VSCode配置

#### 必装插件
```json
{
    "extensions": [
        // 通用
        "editorconfig.editorconfig",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        
        // HTML/CSS
        "bradlc.vscode-tailwindcss",
        "ecmel.vscode-html-css",
        
        // JavaScript/TypeScript
        "ms-vscode.vscode-typescript-next",
        "dsznajder.es7-react-js-snippets",
        
        // Vue
        "Vue.volar",
        "Vue.vscode-typescript-vue-plugin",
        
        // 工具
        "formulahendry.auto-rename-tag",
        "christian-kohler.path-intellisense",
        "usernamehw.errorlens"
    ]
}
```

#### settings.json
```json
{
    // 编辑器
    "editor.fontSize": 14,
    "editor.tabSize": 2,
    "editor.formatOnSave": true,
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true
    },
    
    // 文件
    "files.autoSave": "onFocusChange",
    "files.eol": "\n",
    
    // Prettier
    "[javascript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "[typescript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "[vue]": {
        "editor.defaultFormatter": "Vue.volar"
    },
    
    // ESLint
    "eslint.validate": [
        "javascript",
        "javascriptreact",
        "typescript",
        "typescriptreact",
        "vue"
    ]
}
```

## 🎨 代码规范

### ESLint配置
```bash
# 安装ESLint
pnpm add -D eslint

# 初始化配置
npx eslint --init
```

#### .eslintrc.js
```javascript
module.exports = {
    env: {
        browser: true,
        es2021: true,
        node: true
    },
    extends: [
        'eslint:recommended',
        'plugin:@typescript-eslint/recommended',
        'plugin:react/recommended', // React项目
        'plugin:vue/vue3-recommended', // Vue项目
        'prettier' // 必须放在最后
    ],
    parser: '@typescript-eslint/parser',
    parserOptions: {
        ecmaVersion: 'latest',
        sourceType: 'module',
        ecmaFeatures: {
            jsx: true
        }
    },
    plugins: [
        '@typescript-eslint',
        'react',
        'vue'
    ],
    rules: {
        'no-console': 'warn',
        'no-debugger': 'error',
        '@typescript-eslint/no-unused-vars': 'warn',
        '@typescript-eslint/no-explicit-any': 'warn'
    }
};
```

### Prettier配置

#### .prettierrc
```json
{
    "semi": true,
    "singleQuote": true,
    "tabWidth": 2,
    "trailingComma": "es5",
    "printWidth": 100,
    "arrowParens": "avoid",
    "endOfLine": "lf"
}
```

#### .prettierignore
```
node_modules
dist
build
.next
coverage
*.min.js
*.min.css
```

### EditorConfig

#### .editorconfig
```ini
root = true

[*]
charset = utf-8
indent_style = space
indent_size = 2
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true

[*.md]
trim_trailing_whitespace = false
```

## 🔍 Git配置

### .gitignore
```
# Dependencies
node_modules/
.pnp
.pnp.js

# Testing
coverage/

# Production
build/
dist/
.next/
out/

# Misc
.DS_Store
*.log
.env.local
.env.development.local
.env.test.local
.env.production.local

# IDE
.vscode/
.idea/
*.swp
*.swo
```

### Git Hooks（使用husky）
```bash
# 安装husky
pnpm add -D husky

# 初始化
npx husky-init

# 添加pre-commit hook
echo "npx lint-staged" > .husky/pre-commit
```

#### lint-staged配置
```json
{
    "lint-staged": {
        "*.{js,jsx,ts,tsx}": [
            "eslint --fix",
            "prettier --write"
        ],
        "*.{css,scss,less}": [
            "prettier --write"
        ],
        "*.vue": [
            "eslint --fix",
            "prettier --write"
        ]
    }
}
```

## 📦 项目初始化

### React项目
```bash
# Vite + React
pnpm create vite my-react-app --template react-ts
cd my-react-app
pnpm install
pnpm dev

# Next.js
pnpm create next-app my-next-app
cd my-next-app
pnpm dev
```

### Vue项目
```bash
# Vite + Vue
pnpm create vue@latest my-vue-app
cd my-vue-app
pnpm install
pnpm dev

# Nuxt 3
pnpm dlx nuxi init my-nuxt-app
cd my-nuxt-app
pnpm install
pnpm dev
```

### 项目结构
```
my-project/
├── src/
│   ├── assets/         # 静态资源
│   ├── components/     # 组件
│   ├── hooks/          # 自定义Hooks
│   ├── utils/          # 工具函数
│   ├── types/          # TypeScript类型
│   ├── styles/         # 样式文件
│   ├── api/            # API接口
│   ├── store/          # 状态管理
│   ├── router/         # 路由配置
│   └── App.tsx         # 根组件
├── public/             # 公共资源
├── tests/              # 测试文件
├── .env                # 环境变量
├── .eslintrc.js        # ESLint配置
├── .prettierrc         # Prettier配置
├── tsconfig.json       # TypeScript配置
├── vite.config.ts      # Vite配置
└── package.json        # 项目配置
```

## 🌐 浏览器工具

### Chrome DevTools
- Elements：查看和修改DOM
- Console：调试JavaScript
- Sources：断点调试
- Network：网络请求监控
- Performance：性能分析
- Application：存储、缓存查看

### React DevTools
```bash
# Chrome扩展
# https://chrome.google.com/webstore/detail/react-developer-tools/

# 功能
- 组件树查看
- Props和State检查
- Profiler性能分析
```

### Vue DevTools
```bash
# Chrome扩展
# https://chrome.google.com/webstore/detail/vuejs-devtools/

# 功能
- 组件树查看
- Vuex状态管理
- 路由信息
- 性能分析
```

## 🛠️ 实用工具

### 在线工具
- **代码格式化**：[Prettier Playground](https://prettier.io/playground/)
- **正则测试**：[RegExr](https://regexr.com/)
- **包大小分析**：[Bundlephobia](https://bundlephobia.com/)
- **Can I Use**：[浏览器兼容性查询](https://caniuse.com/)
- **TypeScript Playground**：[在线TS编译](https://www.typescriptlang.org/play)

### 命令行工具
```bash
# 快速启动服务
npx serve dist

# 代码质量检查
npx eslint src/

# 依赖更新
npx npm-check-updates
npx npm-check-updates -u

# 包分析
npx depcheck        # 检查未使用依赖
npx size-limit      # 包大小限制
```

## 💡 最佳实践

### 1. 版本管理
- 使用nvm管理Node版本
- 在项目中指定Node版本（.nvmrc）
- 锁定依赖版本（package-lock.json）

### 2. 代码规范
- 统一使用ESLint + Prettier
- 配置编辑器自动格式化
- 使用Git Hooks强制检查

### 3. 环境变量
```bash
# .env.development
VITE_API_URL=http://localhost:3000
VITE_APP_TITLE=My App (Dev)

# .env.production
VITE_API_URL=https://api.example.com
VITE_APP_TITLE=My App
```

### 4. TypeScript配置
```json
{
    "compilerOptions": {
        "target": "ES2020",
        "module": "ESNext",
        "lib": ["ES2020", "DOM", "DOM.Iterable"],
        "jsx": "react-jsx",
        "strict": true,
        "moduleResolution": "bundler",
        "esModuleInterop": true,
        "skipLibCheck": true,
        "baseUrl": ".",
        "paths": {
            "@/*": ["src/*"]
        }
    },
    "include": ["src"],
    "exclude": ["node_modules"]
}
```

## 📚 参考资料
- [Node.js官网](https://nodejs.org/)
- [pnpm文档](https://pnpm.io/)
- [VSCode文档](https://code.visualstudio.com/docs)
- [ESLint规则](https://eslint.org/docs/rules/)
- [Prettier配置](https://prettier.io/docs/en/options.html)

