# 01-Java环境搭建

## JDK安装

### JDK版本选择

Java版本众多，选择合适的版本是第一步。LTS（长期支持）版本更稳定。

- **Java 8（LTS）**：最广泛使用，企业首选
- **Java 11（LTS）**：现代特性，推荐学习
- **Java 17（LTS）**：最新LTS，新项目推荐
- **Java 21（LTS）**：2023年发布，前沿特性

**推荐**：学习用Java 17，兼容性考虑用Java 11。

### 安装JDK

**Linux（Ubuntu/Debian）：**
```bash
# 安装OpenJDK 17
sudo apt update
sudo apt install openjdk-17-jdk

# 验证安装
java -version
javac -version
```

**macOS：**
```bash
# 使用Homebrew
brew install openjdk@17

# 配置环境变量
echo 'export PATH="/opt/homebrew/opt/openjdk@17/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

**Windows：**
1. 下载Oracle JDK或OpenJDK
2. 安装并配置JAVA_HOME环境变量
3. 添加%JAVA_HOME%\bin到PATH

### 环境变量配置

```bash
# Linux/macOS (~/.bashrc 或 ~/.zshrc)
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
export PATH=$JAVA_HOME/bin:$PATH
export CLASSPATH=.:$JAVA_HOME/lib

# 验证
echo $JAVA_HOME
java -version
```

## 开发工具

### IntelliJ IDEA（强烈推荐）

JetBrains开发的Java IDE，功能最强大，社区版免费。

**优势：**
- 智能代码补全
- 强大的重构功能
- 内置调试器和性能分析
- 集成Maven/Gradle
- Git版本控制

**快捷键（macOS/Windows）：**
- `Cmd/Ctrl + N`：快速查找类
- `Cmd/Ctrl + Shift + N`：快速查找文件
- `Cmd/Ctrl + Alt + L`：格式化代码
- `Cmd/Ctrl + /`：注释/取消注释
- `Shift + F10/F9`：运行/调试

### Eclipse

老牌开源Java IDE，轻量但功能完整。

**优势：**
- 完全免费开源
- 插件生态丰富
- 资源占用较小

### VS Code

轻量级编辑器，通过插件支持Java。

**必装插件：**
- Extension Pack for Java
- Debugger for Java
- Maven for Java

## 构建工具

### Maven

基于XML的项目管理工具，依赖管理自动化。

**pom.xml示例：**
```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <groupId>com.example</groupId>
    <artifactId>my-app</artifactId>
    <version>1.0-SNAPSHOT</version>
    
    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    
    <dependencies>
        <!-- JUnit 5 -->
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter</artifactId>
            <version>5.9.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project>
```

**常用命令：**
```bash
mvn clean           # 清理
mvn compile         # 编译
mvn test            # 测试
mvn package         # 打包
mvn install         # 安装到本地仓库
mvn clean package   # 组合命令
```

### Gradle

基于Groovy/Kotlin的现代构建工具，配置更简洁。

**build.gradle示例：**
```groovy
plugins {
    id 'java'
}

group = 'com.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter:5.9.0'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}
```

**常用命令：**
```bash
gradle clean        # 清理
gradle build        # 构建
gradle test         # 测试
gradle run          # 运行
./gradlew build     # 使用wrapper
```

## Hello World

### 基本程序结构

```java
// HelloWorld.java
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}
```

### 编译和运行

```bash
# 编译
javac HelloWorld.java

# 运行
java HelloWorld

# 输出
Hello, World!
```

### 带包的程序

```java
// src/main/java/com/example/App.java
package com.example;

public class App {
    public static void main(String[] args) {
        System.out.println("Hello from package!");
    }
}
```

```bash
# 编译（在项目根目录）
javac -d out src/main/java/com/example/App.java

# 运行
java -cp out com.example.App
```

## 调试工具

### jdb（命令行调试器）

```bash
# 编译时加调试信息
javac -g HelloWorld.java

# 启动调试
jdb HelloWorld

# 常用命令
stop in HelloWorld.main  # 设置断点
run                      # 运行
print variable           # 打印变量
step                     # 单步执行
next                     # 下一行
cont                     # 继续执行
quit                     # 退出
```

### IntelliJ IDEA调试

- F8：单步跳过
- F7：单步进入
- Shift + F8：单步跳出
- F9：继续执行
- Cmd/Ctrl + F8：切换断点
- Alt + F9：运行到光标

## 常用工具

### jshell（Java 9+）

交互式Java REPL，快速验证代码。

```bash
# 启动
jshell

# 使用
jshell> int x = 10;
jshell> System.out.println(x * 2);
20
jshell> /exit
```

### jconsole/jvisualvm

JVM监控和性能分析工具。

```bash
# 启动jconsole
jconsole

# 启动jvisualvm
jvisualvm
```

**监控内容：**
- 堆内存使用
- 线程状态
- CPU占用
- GC活动

## 编码规范

### 命名约定

```java
// 类名：大驼峰
public class StudentInfo {}

// 方法/变量：小驼峰
public void calculateSum() {}
private int studentAge;

// 常量：全大写+下划线
public static final int MAX_SIZE = 100;

// 包名：全小写
package com.example.myapp;

// 接口：大驼峰（可选I前缀）
public interface Runnable {}
public interface IService {}
```

### 代码风格

```java
// 缩进：4空格
if (condition) {
    statement;
}

// 大括号：K&R风格
public void method() {
    // ...
}

// 一行一条语句
int a = 1;
int b = 2;
```

## 项目结构

### Maven标准结构

```
my-app/
├── pom.xml
├── src/
│   ├── main/
│   │   ├── java/           # Java源代码
│   │   │   └── com/example/
│   │   └── resources/      # 资源文件
│   └── test/
│       ├── java/           # 测试代码
│       └── resources/      # 测试资源
└── target/                 # 编译输出
```

### Gradle标准结构

```
my-app/
├── build.gradle
├── settings.gradle
├── src/
│   ├── main/
│   │   ├── java/
│   │   └── resources/
│   └── test/
│       ├── java/
│       └── resources/
└── build/                  # 编译输出
```

