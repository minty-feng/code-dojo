

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🦀 Rust 开发 &mdash; Backend Tutorial 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=2d0851c8" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=af2ce170"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/copy-code.js?v=caf91246"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="01-Rust环境搭建与所有权" href="01-environment-ownership.html" />
    <link rel="prev" title="Rust 教程" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            Backend Tutorial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Backend Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/index.html">C++ 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/index.html">Java 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodejs/index.html">Node.js 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../go/index.html">Golang 教程</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Rust 教程</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Rust 开发</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">学习时间线</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">阶段一：所有权系统（2021-07）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">阶段二：基础语法（2021-08）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">阶段三：类型系统（2021-10）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">阶段四：并发编程（2021-12）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">阶段五：异步编程（2022-02）</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">学习文档</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Rust核心特性</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">内存安全</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">零成本抽象</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">并发安全</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">工具链</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id13">应用场景</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">系统编程</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">命令行工具</a></li>
<li class="toctree-l4"><a class="reference internal" href="#web">Web后端</a></li>
<li class="toctree-l4"><a class="reference internal" href="#webassembly">WebAssembly</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">区块链</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">游戏开发</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id18">技术栈</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">Web开发</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">异步生态</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">数据处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">测试</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id23">学习资源</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id24">官方文档</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">在线资源</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">推荐书籍</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#crate">常用Crate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id27">基础工具</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">Web服务器</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id29">数据库</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id30">最佳实践</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id31">代码组织</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id32">错误处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">所有权规则</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">并发原则</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id35">异步建议</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id36">编译优化</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cargo-toml">Cargo.toml配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">性能分析</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id38">交叉编译</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id39">常见陷阱</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id40">1. 所有权移动</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id41">2. 借用冲突</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id42">3. 生命周期</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id43">项目实践</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cli">CLI工具</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id44">Web服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id45">性能优化</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id46">学习心得</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="01-environment-ownership.html">01-Rust环境搭建与所有权</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-basic-syntax.html">02-Rust基础语法</a></li>
<li class="toctree-l2"><a class="reference internal" href="03-error-trait.html">03-错误处理、泛型与Trait</a></li>
<li class="toctree-l2"><a class="reference internal" href="04-concurrency-pointers.html">04-并发与智能指针</a></li>
<li class="toctree-l2"><a class="reference internal" href="05-async.html">05-异步编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="06-troubleshooting.html">06-Rust疑难解析</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell/index.html">Shell 教程</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Backend Tutorial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Rust 教程</a></li>
      <li class="breadcrumb-item active">🦀 Rust 开发</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/rust/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="rust">
<h1>🦀 Rust 开发<a class="headerlink" href="#rust" title="Permalink to this heading"></a></h1>
<p>Rust是Mozilla主导开发的系统编程语言，2015年发布1.0版本。核心特性：内存安全、零成本抽象、并发安全。</p>
<section id="id1">
<h2>学习时间线<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
<p><strong>2021年7月 - 2022年3月（9个月）</strong></p>
<section id="id2">
<h3>阶段一：所有权系统（2021-07）<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>环境搭建、工具链</p></li>
<li><p>所有权、借用、生命周期</p></li>
<li><p>引用规则、切片</p></li>
</ul>
</section>
<section id="id3">
<h3>阶段二：基础语法（2021-08）<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>数据类型、变量、函数</p></li>
<li><p>控制流、模式匹配</p></li>
<li><p>结构体、枚举</p></li>
<li><p>Vector、String、HashMap</p></li>
</ul>
</section>
<section id="id4">
<h3>阶段三：类型系统（2021-10）<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>错误处理（Result、Option、?运算符）</p></li>
<li><p>泛型、Trait</p></li>
<li><p>生命周期注解</p></li>
<li><p>关联类型、运算符重载</p></li>
</ul>
</section>
<section id="id5">
<h3>阶段四：并发编程（2021-12）<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>智能指针（Box、Rc、Arc、RefCell、Mutex）</p></li>
<li><p>线程、消息传递</p></li>
<li><p>共享状态、Send/Sync trait</p></li>
<li><p>无畏并发原理</p></li>
</ul>
</section>
<section id="id6">
<h3>阶段五：异步编程（2022-02）<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>async/await、Future</p></li>
<li><p>Tokio运行时</p></li>
<li><p>异步I/O、Stream</p></li>
<li><p>异步通道、同步原语</p></li>
</ul>
</section>
</section>
<section id="id7">
<h2>学习文档<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>01-环境搭建与所有权.md</strong> - Rust环境、所有权系统、借用规则</p></li>
<li><p><strong>02-基础语法.md</strong> - 数据类型、控制流、结构体、枚举、集合</p></li>
<li><p><strong>03-错误处理与Trait.md</strong> - Result/Option、泛型、Trait、生命周期</p></li>
<li><p><strong>04-并发与智能指针.md</strong> - 智能指针、线程、Channel、Mutex、Arc</p></li>
<li><p><strong>05-异步编程.md</strong> - async/await、Tokio、异步I/O、HTTP服务器</p></li>
</ol>
</section>
<section id="id8">
<h2>Rust核心特性<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h2>
<section id="id9">
<h3>内存安全<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>所有权系统</strong>：每个值有唯一所有者</p></li>
<li><p><strong>借用检查</strong>：编译期保证引用有效性</p></li>
<li><p><strong>无GC</strong>：零运行时开销</p></li>
<li><p><strong>消除悬空指针</strong>：编译器阻止</p></li>
<li><p><strong>消除数据竞争</strong>：类型系统保证</p></li>
</ul>
</section>
<section id="id10">
<h3>零成本抽象<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>泛型单态化</strong>：编译期展开</p></li>
<li><p><strong>Trait对象</strong>：动态分发可选</p></li>
<li><p><strong>迭代器</strong>：编译为循环</p></li>
<li><p><strong>闭包</strong>：零开销捕获</p></li>
<li><p><strong>性能接近C</strong>：无运行时</p></li>
</ul>
</section>
<section id="id11">
<h3>并发安全<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Send trait</strong>：可跨线程转移</p></li>
<li><p><strong>Sync trait</strong>：可跨线程共享</p></li>
<li><p><strong>编译期检查</strong>：消除数据竞争</p></li>
<li><p><strong>类型系统保证</strong>：无需运行时检查</p></li>
<li><p><strong>消息传递/共享状态</strong>：两种并发模式</p></li>
</ul>
</section>
<section id="id12">
<h3>工具链<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Cargo</strong>：构建工具、包管理</p></li>
<li><p><strong>rustfmt</strong>：代码格式化</p></li>
<li><p><strong>clippy</strong>：Lint工具</p></li>
<li><p><strong>rust-analyzer</strong>：LSP服务器</p></li>
<li><p><strong>rustup</strong>：工具链管理</p></li>
</ul>
</section>
</section>
<section id="id13">
<h2>应用场景<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h2>
<section id="id14">
<h3>系统编程<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>操作系统内核（Redox OS）</p></li>
<li><p>嵌入式开发</p></li>
<li><p>驱动程序</p></li>
<li><p>文件系统</p></li>
</ul>
</section>
<section id="id15">
<h3>命令行工具<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>ripgrep（文本搜索）</p></li>
<li><p>fd（文件查找）</p></li>
<li><p>bat（cat替代）</p></li>
<li><p>exa（ls替代）</p></li>
<li><p>delta（diff工具）</p></li>
</ul>
</section>
<section id="web">
<h3>Web后端<a class="headerlink" href="#web" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Actix Web（高性能）</p></li>
<li><p>Axum（现代框架、Tower生态、异步支持）</p></li>
<li><p>Rocket（类型安全）</p></li>
<li><p>Warp（函数式风格）</p></li>
</ul>
</section>
<section id="webassembly">
<h3>WebAssembly<a class="headerlink" href="#webassembly" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Yew（前端框架）</p></li>
<li><p>trunk（构建工具）</p></li>
<li><p>wasm-bindgen（JS互操作）</p></li>
</ul>
</section>
<section id="id16">
<h3>区块链<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Polkadot、Solana、NEAR</p></li>
<li><p>Substrate框架</p></li>
</ul>
</section>
<section id="id17">
<h3>游戏开发<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Bevy游戏引擎</p></li>
<li><p>Amethyst引擎</p></li>
</ul>
</section>
</section>
<section id="id18">
<h2>技术栈<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h2>
<section id="id19">
<h3>Web开发<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>框架</strong>：Axum、Actix Web、Rocket</p></li>
<li><p><strong>ORM</strong>：Diesel、SeaORM、sqlx</p></li>
<li><p><strong>序列化</strong>：serde、serde_json</p></li>
<li><p><strong>HTTP客户端</strong>：reqwest、hyper</p></li>
<li><p><strong>模板</strong>：askama、tera</p></li>
</ul>
</section>
<section id="id20">
<h3>异步生态<a class="headerlink" href="#id20" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>运行时</strong>：Tokio、async-std</p></li>
<li><p><strong>工具</strong>：tokio-util、futures</p></li>
<li><p><strong>HTTP</strong>：hyper、reqwest</p></li>
<li><p><strong>WebSocket</strong>：tokio-tungstenite</p></li>
</ul>
</section>
<section id="id21">
<h3>数据处理<a class="headerlink" href="#id21" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>JSON</strong>：serde_json</p></li>
<li><p><strong>YAML</strong>：serde_yaml</p></li>
<li><p><strong>TOML</strong>：toml</p></li>
<li><p><strong>CSV</strong>：csv</p></li>
<li><p><strong>正则</strong>：regex</p></li>
</ul>
</section>
<section id="id22">
<h3>测试<a class="headerlink" href="#id22" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>单元测试</strong>：内置#[test]</p></li>
<li><p><strong>属性测试</strong>：proptest、quickcheck</p></li>
<li><p><strong>模拟</strong>：mockall</p></li>
<li><p><strong>基准测试</strong>：criterion</p></li>
</ul>
</section>
</section>
<section id="id23">
<h2>学习资源<a class="headerlink" href="#id23" title="Permalink to this heading"></a></h2>
<section id="id24">
<h3>官方文档<a class="headerlink" href="#id24" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The Rust Programming Language（官方书）</p></li>
<li><p>Rust by Example</p></li>
<li><p>Rustonomicon（高级内容）</p></li>
<li><p>Async Book（异步编程）</p></li>
</ul>
</section>
<section id="id25">
<h3>在线资源<a class="headerlink" href="#id25" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>docs.rs（库文档）</p></li>
<li><p>crates.io（包仓库）</p></li>
<li><p>Rust Playground（在线运行）</p></li>
<li><p>cheats.rs（速查表）</p></li>
</ul>
</section>
<section id="id26">
<h3>推荐书籍<a class="headerlink" href="#id26" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Programming Rust</p></li>
<li><p>Rust for Rustaceans</p></li>
<li><p>Zero To Production In Rust</p></li>
</ul>
</section>
</section>
<section id="crate">
<h2>常用Crate<a class="headerlink" href="#crate" title="Permalink to this heading"></a></h2>
<section id="id27">
<h3>基础工具<a class="headerlink" href="#id27" title="Permalink to this heading"></a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[dependencies]</span>
<span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">serde_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>
<span class="n">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;full&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">anyhow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>
<span class="n">thiserror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>
</pre></div>
</div>
</section>
<section id="id28">
<h3>Web服务器<a class="headerlink" href="#id28" title="Permalink to this heading"></a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[dependencies]</span>
<span class="n">axum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.7&quot;</span>
<span class="n">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;full&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">tower</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.4&quot;</span>
</pre></div>
</div>
</section>
<section id="id29">
<h3>数据库<a class="headerlink" href="#id29" title="Permalink to this heading"></a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[dependencies]</span>
<span class="n">sqlx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;0.7&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;runtime-tokio&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;postgres&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">diesel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;2.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;postgres&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id30">
<h2>最佳实践<a class="headerlink" href="#id30" title="Permalink to this heading"></a></h2>
<section id="id31">
<h3>代码组织<a class="headerlink" href="#id31" title="Permalink to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>src/
├── main.rs          # 二进制入口
├── lib.rs           # 库入口
├── bin/             # 多个二进制
├── models/          # 数据模型
├── handlers/        # 处理器
└── utils/           # 工具函数
</pre></div>
</div>
</section>
<section id="id32">
<h3>错误处理<a class="headerlink" href="#id32" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 库：返回具体错误类型</span>
<span class="k">pub</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="nc">MyError</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Io</span><span class="p">(</span><span class="n">std</span><span class="p">::</span><span class="n">io</span><span class="p">::</span><span class="n">Error</span><span class="p">),</span>
<span class="w">    </span><span class="n">Parse</span><span class="p">(</span><span class="n">ParseError</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1">// 应用：使用anyhow</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">anyhow</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id33">
<h3>所有权规则<a class="headerlink" href="#id33" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>默认不可变</p></li>
<li><p>优先借用，避免克隆</p></li>
<li><p>可变引用独占</p></li>
<li><p>生命周期尽量简单</p></li>
<li><p>返回所有权优于可变引用</p></li>
</ul>
</section>
<section id="id34">
<h3>并发原则<a class="headerlink" href="#id34" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Send/Sync由编译器保证</p></li>
<li><p>优先消息传递</p></li>
<li><p>共享状态用Arc&lt;Mutex<T>&gt;</p></li>
<li><p>读多写少用Arc&lt;RwLock<T>&gt;</p></li>
<li><p>原子操作用Atomic*</p></li>
</ul>
</section>
<section id="id35">
<h3>异步建议<a class="headerlink" href="#id35" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>避免阻塞运行时</p></li>
<li><p>CPU密集用spawn_blocking</p></li>
<li><p>I/O密集用async</p></li>
<li><p>使用超时机制</p></li>
<li><p>正确处理取消</p></li>
</ul>
</section>
</section>
<section id="id36">
<h2>编译优化<a class="headerlink" href="#id36" title="Permalink to this heading"></a></h2>
<section id="cargo-toml">
<h3>Cargo.toml配置<a class="headerlink" href="#cargo-toml" title="Permalink to this heading"></a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[profile.release]</span>
<span class="n">opt-level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">          </span><span class="c1"># 最高优化</span>
<span class="n">lto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">             </span><span class="c1"># 链接时优化</span>
<span class="n">codegen-units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">      </span><span class="c1"># 单一代码生成单元</span>
<span class="n">strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">           </span><span class="c1"># 去除符号</span>
<span class="n">panic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;abort&#39;</span><span class="w">        </span><span class="c1"># 减小二进制</span>

<span class="k">[profile.dev]</span>
<span class="n">opt-level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">          </span><span class="c1"># 开发时适度优化</span>

<span class="k">[profile.dev.package.</span><span class="s2">&quot;*&quot;</span><span class="k">]</span>
<span class="n">opt-level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">          </span><span class="c1"># 依赖完全优化</span>
</pre></div>
</div>
</section>
<section id="id37">
<h3>性能分析<a class="headerlink" href="#id37" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># CPU profile</span>
cargo<span class="w"> </span>build<span class="w"> </span>--release
perf<span class="w"> </span>record<span class="w"> </span>./target/release/app
perf<span class="w"> </span>report

<span class="c1"># 内存分析</span>
valgrind<span class="w"> </span>--tool<span class="o">=</span>massif<span class="w"> </span>./target/release/app

<span class="c1"># Benchmark</span>
cargo<span class="w"> </span>bench
</pre></div>
</div>
</section>
</section>
<section id="id38">
<h2>交叉编译<a class="headerlink" href="#id38" title="Permalink to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 安装目标</span>
rustup<span class="w"> </span>target<span class="w"> </span>add<span class="w"> </span>x86_64-pc-windows-gnu

<span class="c1"># 编译</span>
cargo<span class="w"> </span>build<span class="w"> </span>--target<span class="w"> </span>x86_64-pc-windows-gnu

<span class="c1"># 支持的目标</span>
rustup<span class="w"> </span>target<span class="w"> </span>list
</pre></div>
</div>
</section>
<section id="id39">
<h2>常见陷阱<a class="headerlink" href="#id39" title="Permalink to this heading"></a></h2>
<section id="id40">
<h3>1. 所有权移动<a class="headerlink" href="#id40" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ❌ 错误</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">);</span><span class="w">  </span><span class="c1">// 错误：s1已移动</span>

<span class="c1">// ✓ 正确</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="id41">
<h3>2. 借用冲突<a class="headerlink" href="#id41" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ❌ 错误</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">v</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="w">  </span><span class="c1">// 错误：已有不可变借用</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>

<span class="c1">// ✓ 正确</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">v</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="id42">
<h3>3. 生命周期<a class="headerlink" href="#id42" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ❌ 错误</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">s</span><span class="w">  </span><span class="c1">// 错误：返回局部变量引用</span>
<span class="p">}</span>

<span class="c1">// ✓ 正确</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">no_dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id43">
<h2>项目实践<a class="headerlink" href="#id43" title="Permalink to this heading"></a></h2>
<section id="cli">
<h3>CLI工具<a class="headerlink" href="#cli" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>使用clap解析参数</p></li>
<li><p>anyhow处理错误</p></li>
<li><p>env_logger日志</p></li>
</ul>
</section>
<section id="id44">
<h3>Web服务<a class="headerlink" href="#id44" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Axum框架</p></li>
<li><p>Tokio运行时</p></li>
<li><p>sqlx数据库</p></li>
<li><p>tower中间件</p></li>
</ul>
</section>
<section id="id45">
<h3>性能优化<a class="headerlink" href="#id45" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>减少克隆</p></li>
<li><p>使用&amp;str而非String</p></li>
<li><p>预分配容量</p></li>
<li><p>避免不必要的分配</p></li>
<li><p>使用迭代器</p></li>
</ul>
</section>
</section>
<section id="id46">
<h2>学习心得<a class="headerlink" href="#id46" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>所有权核心</strong>：内存安全和并发安全的基础</p></li>
<li><p><strong>编译器严格</strong>：编译通过基本无运行时错误</p></li>
<li><p><strong>类型系统完备</strong>：泛型、Trait、生命周期</p></li>
<li><p><strong>零成本抽象</strong>：高级特性无性能损失</p></li>
<li><p><strong>异步高效</strong>：Tokio生态完善</p></li>
<li><p><strong>工具链优秀</strong>：Cargo、rustfmt、clippy</p></li>
<li><p><strong>性能接近C</strong>：适合系统编程</p></li>
<li><p><strong>社区活跃</strong>：crates.io包丰富</p></li>
<li><p><strong>文档完善</strong>：docs.rs质量高</p></li>
<li><p><strong>安全第一</strong>：编译期消除大部分bug</p></li>
</ol>
<p><strong>核心：</strong> Rust通过所有权系统和类型系统在编译期保证内存安全和并发安全，实现零成本抽象和高性能。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Rust 教程" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="01-environment-ownership.html" class="btn btn-neutral float-right" title="01-Rust环境搭建与所有权" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Code Dojo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>