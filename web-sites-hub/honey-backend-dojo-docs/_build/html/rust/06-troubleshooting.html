

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>06-Rust疑难解析 &mdash; Backend Tutorial 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=2d0851c8" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=af2ce170"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/copy-code.js?v=caf91246"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Shell 教程" href="../shell/index.html" />
    <link rel="prev" title="05-异步编程" href="05-async.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            Backend Tutorial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Backend Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/index.html">C++ 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/index.html">Java 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodejs/index.html">Node.js 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../go/index.html">Golang 教程</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Rust 教程</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">Rust 开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="01-environment-ownership.html">01-Rust环境搭建与所有权</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-basic-syntax.html">02-Rust基础语法</a></li>
<li class="toctree-l2"><a class="reference internal" href="03-error-trait.html">03-错误处理、泛型与Trait</a></li>
<li class="toctree-l2"><a class="reference internal" href="04-concurrency-pointers.html">04-并发与智能指针</a></li>
<li class="toctree-l2"><a class="reference internal" href="05-async.html">05-异步编程</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">06-Rust疑难解析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">常见编译错误</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">借用检查错误</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">生命周期错误</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">所有权错误</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trait">Trait错误</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id5">常见运行时错误</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#panic">Panic场景</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">死锁</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">性能陷阱</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">不必要的克隆</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vec">Vec预分配</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string-vs-str">String vs &amp;str</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vs">迭代器 vs 索引</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rc-refcell">小心Rc&lt;RefCell<T>&gt;</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id9">调试技巧</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#println">println! 调试</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">类型检查技巧</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">编译器输出分析</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clippy">Clippy警告</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#unsafe">unsafe代码</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">何时使用unsafe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">unsafe最佳实践</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id14">宏调试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">依赖问题</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">版本冲突</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">编译时间优化</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id18">最佳实践清单</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">所有权</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">性能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">错误处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">并发</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">代码质量</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell/index.html">Shell 教程</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Backend Tutorial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Rust 教程</a></li>
      <li class="breadcrumb-item active">06-Rust疑难解析</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/rust/06-troubleshooting.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="rust">
<h1>06-Rust疑难解析<a class="headerlink" href="#rust" title="Permalink to this heading"></a></h1>
<p>Rust编译器严格，常见错误、性能陷阱、调试技巧汇总。</p>
<section id="id1">
<h2>常见编译错误<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
<section id="id2">
<h3>借用检查错误<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 错误1：可变借用冲突</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// ❌ 错误：不能同时存在两个可变借用</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">);</span>

<span class="c1">// 解决：分离作用域</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">);</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// r1作用域结束</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// ✓ OK</span>

<span class="c1">// 错误2：可变和不可变借用冲突</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// ❌ 错误：已有不可变借用</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">);</span>

<span class="c1">// 解决：利用NLL（非词法生命周期）</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">);</span><span class="w">  </span><span class="c1">// r1最后使用</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// ✓ OK：r1不再使用</span>
</pre></div>
</div>
</section>
<section id="id3">
<h3>生命周期错误<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 错误：返回悬空引用</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">s</span><span class="w">  </span><span class="c1">// ❌ 错误：s离开作用域</span>
<span class="p">}</span>

<span class="c1">// 解决1：返回所有权</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">no_dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 解决2：使用&#39;static</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">static_str</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="o">&#39;</span><span class="nb">static</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">&quot;hello&quot;</span><span class="w">  </span><span class="c1">// 字符串字面量是&#39;static</span>
<span class="p">}</span>

<span class="c1">// 错误：生命周期不匹配</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="o">&lt;&#39;</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="o">&#39;</span><span class="na">a</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Foo</span><span class="o">&lt;&#39;</span><span class="nb">_</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">bad</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="mi">5</span><span class="w">  </span><span class="c1">// ❌ 错误：返回临时值的引用</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">good</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">x</span><span class="w">  </span><span class="c1">// ✓ OK：返回结构体字段</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3>所有权错误<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 错误：使用已移动的值</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">);</span><span class="w">  </span><span class="c1">// ❌ 错误：s1已移动</span>

<span class="c1">// 解决：克隆或借用</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span><span class="w">  </span><span class="c1">// ✓ OK</span>

<span class="c1">// 错误：部分移动</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">),</span>
<span class="p">};</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w">  </span><span class="c1">// x移走</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">);</span><span class="w">  </span><span class="c1">// ✓ OK：y未移动</span>
<span class="c1">// println!(&quot;{:?}&quot;, p);  // ❌ 错误：p部分移动</span>

<span class="c1">// 解决：实现Clone或使用引用</span>
</pre></div>
</div>
</section>
<section id="trait">
<h3>Trait错误<a class="headerlink" href="#trait" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 错误：trait未实现</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="c1">// v.sort();  // ❌ 错误：Vec&lt;i32&gt;未实现排序需要的Ord</span>

<span class="c1">// 解决：使用正确的trait</span>
<span class="n">v</span><span class="p">.</span><span class="n">sort</span><span class="p">();</span><span class="w">  </span><span class="c1">// ✓ OK：i32实现了Ord</span>

<span class="c1">// 错误：孤儿规则</span>
<span class="c1">// impl ToString for Vec&lt;i32&gt; { }  // ❌ 错误：不能为外部类型实现外部trait</span>

<span class="c1">// 解决：newtype模式</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">MyVec</span><span class="p">(</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">);</span>
<span class="k">impl</span><span class="w"> </span><span class="nb">ToString</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">MyVec</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// ✓ OK</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">format!</span><span class="p">(</span><span class="s">&quot;{:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id5">
<h2>常见运行时错误<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h2>
<section id="panic">
<h3>Panic场景<a class="headerlink" href="#panic" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1. 数组越界</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span><span class="w">  </span><span class="c1">// panic!</span>

<span class="c1">// 解决：使用get</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w">  </span><span class="c1">// 返回Option&lt;&amp;T&gt;</span>
<span class="k">match</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">),</span>
<span class="w">    </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;索引越界&quot;</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1">// 2. unwrap/expect on None/Err</span>
<span class="kd">let</span><span class="w"> </span><span class="n">opt</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="p">;</span>
<span class="c1">// opt.unwrap();  // panic!</span>

<span class="c1">// 解决：使用match或if let</span>
<span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">opt</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 3. 整数溢出（debug模式panic，release模式回绕）</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="kt">u8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="c1">// let y = x + 1;  // debug panic，release回绕到0</span>

<span class="c1">// 解决：使用checked_*方法</span>
<span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">checked_add</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// 返回Option&lt;u8&gt;</span>

<span class="c1">// 4. 除零</span>
<span class="c1">// let x = 10 / 0;  // panic!</span>

<span class="c1">// 解决：检查除数</span>
<span class="kd">let</span><span class="w"> </span><span class="n">divisor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="n">divisor</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">divisor</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id6">
<h3>死锁<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sync</span><span class="p">::</span><span class="n">Mutex</span><span class="p">;</span>

<span class="c1">// 死锁示例</span>
<span class="kd">let</span><span class="w"> </span><span class="n">m1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mutex</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">m2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mutex</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="kd">let</span><span class="w"> </span><span class="n">g1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m1</span><span class="p">.</span><span class="n">lock</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="c1">// let g2 = m2.lock().unwrap();  // 如果另一线程先锁m2再锁m1，死锁</span>

<span class="c1">// 解决1：固定加锁顺序</span>
<span class="c1">// 解决2：使用try_lock</span>
<span class="k">match</span><span class="w"> </span><span class="n">m2</span><span class="p">.</span><span class="n">try_lock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">g2</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// 获取到锁</span>
<span class="w">        </span><span class="c1">// 使用g1和g2</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// 获取失败</span>
<span class="w">        </span><span class="nb">drop</span><span class="p">(</span><span class="n">g1</span><span class="p">);</span><span class="w">  </span><span class="c1">// 释放m1</span>
<span class="w">        </span><span class="c1">// 重试或返回错误</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 解决3：使用超时</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">time</span><span class="p">::</span><span class="n">Duration</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="n">guard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m1</span><span class="p">.</span><span class="n">lock</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="c1">// 某些实现提供timeout版本</span>
</pre></div>
</div>
</section>
</section>
<section id="id7">
<h2>性能陷阱<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h2>
<section id="id8">
<h3>不必要的克隆<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ❌ 性能差：过度克隆</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">process_string</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">upper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">to_uppercase</span><span class="p">();</span><span class="w">  </span><span class="c1">// 分配新String</span>
<span class="w">    </span><span class="n">upper</span><span class="p">.</span><span class="n">clone</span><span class="p">()</span><span class="w">  </span><span class="c1">// 不必要的克隆</span>
<span class="p">}</span>

<span class="c1">// ✅ 优化：直接返回</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">process_string</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">to_uppercase</span><span class="p">()</span><span class="w">  </span><span class="c1">// 直接返回，无额外分配</span>
<span class="p">}</span>

<span class="c1">// ❌ 性能差：循环中克隆</span>
<span class="kd">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">);</span><span class="w"> </span><span class="mi">1000</span><span class="p">];</span>
<span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span><span class="w">  </span><span class="c1">// 1000次克隆</span>
<span class="w">    </span><span class="n">process</span><span class="p">(</span><span class="n">copy</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ✅ 优化：使用引用</span>
<span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">process</span><span class="p">(</span><span class="n">item</span><span class="p">);</span><span class="w">  </span><span class="c1">// 无克隆</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="vec">
<h3>Vec预分配<a class="headerlink" href="#vec" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ❌ 性能差：多次重新分配</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="mi">10000</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">v</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w">  </span><span class="c1">// 可能多次重新分配</span>
<span class="p">}</span>

<span class="c1">// ✅ 优化：预分配</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">with_capacity</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
<span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="mi">10000</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">v</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w">  </span><span class="c1">// 一次分配</span>
<span class="p">}</span>

<span class="c1">// 或使用collect</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">10000</span><span class="p">).</span><span class="n">collect</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="string-vs-str">
<h3>String vs &amp;str<a class="headerlink" href="#string-vs-str" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ❌ 性能差：不必要的String分配</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Hello, {}!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">greet</span><span class="p">(</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;Alice&quot;</span><span class="p">));</span><span class="w">  </span><span class="c1">// 总是分配</span>

<span class="c1">// ✅ 优化：使用&amp;str</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Hello, {}!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">greet</span><span class="p">(</span><span class="s">&quot;Alice&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// 无分配</span>
<span class="n">greet</span><span class="p">(</span><span class="o">&amp;</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;Bob&quot;</span><span class="p">));</span><span class="w">  </span><span class="c1">// 也可接受String引用</span>
</pre></div>
</div>
</section>
<section id="vs">
<h3>迭代器 vs 索引<a class="headerlink" href="#vs" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ❌ 性能差：索引访问</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="n">v</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w">  </span><span class="c1">// 每次都做边界检查</span>
<span class="p">}</span>

<span class="c1">// ✅ 优化：迭代器</span>
<span class="kd">let</span><span class="w"> </span><span class="n">sum</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">sum</span><span class="p">();</span><span class="w">  </span><span class="c1">// 编译器优化，无边界检查</span>
</pre></div>
</div>
</section>
<section id="rc-refcell">
<h3>小心Rc&lt;RefCell<T>&gt;<a class="headerlink" href="#rc-refcell" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">rc</span><span class="p">::</span><span class="n">Rc</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">cell</span><span class="p">::</span><span class="n">RefCell</span><span class="p">;</span>

<span class="c1">// Rc&lt;RefCell&lt;T&gt;&gt;有运行时开销</span>
<span class="kd">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rc</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">RefCell</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]));</span>

<span class="c1">// 每次borrow都有检查开销</span>
<span class="k">for</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="mi">1000</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">borrowed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">borrow</span><span class="p">();</span><span class="w">  </span><span class="c1">// 运行时借用检查</span>
<span class="w">    </span><span class="c1">// 使用borrowed</span>
<span class="p">}</span>

<span class="c1">// 优化：减少borrow次数</span>
<span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">borrowed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">borrow_mut</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="mi">1000</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">borrowed</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w">  </span><span class="c1">// 只borrow一次</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id9">
<h2>调试技巧<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h2>
<section id="println">
<h3>println! 调试<a class="headerlink" href="#println" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 基础打印</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;x = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>

<span class="c1">// Debug格式</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">);</span><span class="w">  </span><span class="c1">// 单行</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{:#?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">);</span><span class="w">  </span><span class="c1">// 多行格式化</span>

<span class="c1">// dbg! 宏（显示位置）</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="fm">dbg!</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w">  </span><span class="c1">// [src/main.rs:2] x = 5</span>

<span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">dbg!</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// 返回值</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3>类型检查技巧<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 技巧：让编译器告诉类型</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">  </span><span class="c1">// 编译错误，错误信息显示x的类型</span>

<span class="c1">// 使用type_name（nightly或std::any）</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">any</span><span class="p">::</span><span class="n">type_name</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">type_of</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">T</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="o">&#39;</span><span class="nb">static</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">type_name</span><span class="p">::</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">type_of</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="p">));</span><span class="w">  </span><span class="c1">// &quot;alloc::vec::Vec&lt;i32&gt;&quot;</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3>编译器输出分析<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 查看宏展开</span>
cargo<span class="w"> </span>expand

<span class="c1"># 查看MIR（中间表示）</span>
cargo<span class="w"> </span>rustc<span class="w"> </span>--<span class="w"> </span>-Z<span class="w"> </span><span class="nv">unpretty</span><span class="o">=</span>mir

<span class="c1"># 查看LLVM IR</span>
cargo<span class="w"> </span>rustc<span class="w"> </span>--<span class="w"> </span>--emit<span class="o">=</span>llvm-ir

<span class="c1"># 查看汇编</span>
cargo<span class="w"> </span>rustc<span class="w"> </span>--<span class="w"> </span>--emit<span class="o">=</span>asm

<span class="c1"># 详细编译信息</span>
cargo<span class="w"> </span>build<span class="w"> </span>-vv

<span class="c1"># 查看依赖树</span>
cargo<span class="w"> </span>tree

<span class="c1"># 查看为什么编译某个crate</span>
cargo<span class="w"> </span>build<span class="w"> </span>--timings
</pre></div>
</div>
</section>
<section id="clippy">
<h3>Clippy警告<a class="headerlink" href="#clippy" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 运行clippy</span>
cargo<span class="w"> </span>clippy

<span class="c1"># 严格模式</span>
cargo<span class="w"> </span>clippy<span class="w"> </span>--<span class="w"> </span>-D<span class="w"> </span>warnings

<span class="c1"># 特定lint</span>
cargo<span class="w"> </span>clippy<span class="w"> </span>--<span class="w"> </span>-W<span class="w"> </span>clippy::pedantic

<span class="c1"># 常见警告修复</span>
</pre></div>
</div>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 警告：不必要的clone</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
<span class="c1">// 如果s不再使用，直接move：let s2 = s;</span>

<span class="c1">// 警告：单字符字符串</span>
<span class="s">&quot;x&quot;</span><span class="p">.</span><span class="n">to_string</span><span class="p">();</span>
<span class="c1">// 使用：&#39;x&#39;.to_string() 或 String::from(&#39;x&#39;)</span>

<span class="c1">// 警告：len() == 0</span>
<span class="k">if</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="c1">// 使用：if v.is_empty() { }</span>

<span class="c1">// 警告：match可以用if let</span>
<span class="k">match</span><span class="w"> </span><span class="n">opt</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
<span class="c1">// 使用：if let Some(x) = opt { /* ... */ }</span>
</pre></div>
</div>
</section>
</section>
<section id="unsafe">
<h2>unsafe代码<a class="headerlink" href="#unsafe" title="Permalink to this heading"></a></h2>
<section id="id12">
<h3>何时使用unsafe<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1. 解引用裸指针</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">num</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="kt">i32</span><span class="p">;</span><span class="w">  </span><span class="c1">// 不可变裸指针</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">mut</span><span class="w"> </span><span class="kt">i32</span><span class="p">;</span><span class="w">  </span><span class="c1">// 可变裸指针</span>

<span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">r1</span><span class="p">);</span>
<span class="w">    </span><span class="o">*</span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 2. 调用unsafe函数</span>
<span class="k">unsafe</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">dangerous</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">dangerous</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// 3. 访问可变静态变量</span>
<span class="k">static</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">COUNTER</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">COUNTER</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">COUNTER</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 4. 实现unsafe trait</span>
<span class="k">unsafe</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">UnsafeTrait</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">method</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">unsafe</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">UnsafeTrait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">MyType</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">method</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 5. 访问union字段</span>
<span class="k">union</span><span class="w"> </span><span class="nc">MyUnion</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">f1</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span>
<span class="w">    </span><span class="n">f2</span><span class="p">:</span><span class="w"> </span><span class="kt">f32</span><span class="p">,</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyUnion</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">f1</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">f1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id13">
<h3>unsafe最佳实践<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ✓ 最小化unsafe块</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 安全代码</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 仅unsafe操作</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// 更多安全代码</span>
<span class="p">}</span>

<span class="c1">// ✓ 封装unsafe</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">safe_wrapper</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="kt">i32</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">assert!</span><span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">.</span><span class="n">is_empty</span><span class="p">());</span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">*</span><span class="n">data</span><span class="p">.</span><span class="n">get_unchecked</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w">  </span><span class="c1">// 已检查非空</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ❌ 不要暴露unsafe</span>
<span class="c1">// pub unsafe fn dangerous_api() { }</span>

<span class="c1">// ✓ 文档说明安全不变量</span>
<span class="sd">/// # Safety</span>
<span class="sd">/// 调用者必须确保`ptr`是有效的、对齐的指针</span>
<span class="k">pub</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">read_ptr</span><span class="p">(</span><span class="n">ptr</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">*</span><span class="n">ptr</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id14">
<h2>宏调试<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h2>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 查看宏展开</span>
<span class="c1">// cargo expand（需要cargo-expand）</span>

<span class="c1">// 手动追踪</span>
<span class="fm">macro_rules!</span><span class="w"> </span><span class="n">debug_macro</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="cp">$($arg</span><span class="p">:</span><span class="nc">tt</span><span class="p">)</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;展开: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="fm">stringify!</span><span class="p">(</span><span class="cp">$($arg</span><span class="p">)</span><span class="o">*</span><span class="p">));</span>
<span class="w">            </span><span class="cp">$($arg</span><span class="p">)</span><span class="o">*</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>

<span class="c1">// 编译时打印</span>
<span class="fm">macro_rules!</span><span class="w"> </span><span class="n">show_type</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="cp">$t</span><span class="p">:</span><span class="nc">ty</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">_</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">struct</span><span class="w"> </span><span class="nc">TypeDisplay</span><span class="p">;</span>
<span class="w">            </span><span class="k">impl</span><span class="w"> </span><span class="n">TypeDisplay</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">const</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">type_name</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="o">&#39;</span><span class="nb">static</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="fm">stringify!</span><span class="p">(</span><span class="cp">$t</span><span class="p">)</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id15">
<h2>依赖问题<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h2>
<section id="id16">
<h3>版本冲突<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ 错误：版本冲突</span>
<span class="k">[dependencies]</span>
<span class="n">crate_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w">  </span><span class="c1"># 依赖 shared = &quot;1.0&quot;</span>
<span class="n">crate_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="w">  </span><span class="c1"># 依赖 shared = &quot;2.0&quot;</span>

<span class="c1"># 解决：统一版本或使用补丁</span>
<span class="k">[patch.crates-io]</span>
<span class="n">shared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/user/shared&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;fix&quot;</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3>编译时间优化<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargo.toml</span>
<span class="k">[profile.dev]</span>
<span class="n">opt-level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c1"># 适度优化</span>

<span class="k">[profile.dev.package.</span><span class="s2">&quot;*&quot;</span><span class="k">]</span>
<span class="n">opt-level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="c1"># 依赖完全优化</span>

<span class="c1"># 使用sccache</span>
<span class="c1"># export RUSTC_WRAPPER=sccache</span>

<span class="c1"># 增量编译（默认启用）</span>
<span class="c1"># export CARGO_INCREMENTAL=1</span>

<span class="c1"># 并行编译</span>
<span class="c1"># cargo build -j 8</span>
</pre></div>
</div>
</section>
</section>
<section id="id18">
<h2>最佳实践清单<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h2>
<section id="id19">
<h3>所有权<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h3>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 优先借用，避免克隆</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 函数参数用&amp;T或&amp;mut T</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 返回值避免借用（除非明确生命周期）</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 使用Option/Result传递可能失败的值</p></li>
</ul>
</section>
<section id="id20">
<h3>性能<a class="headerlink" href="#id20" title="Permalink to this heading"></a></h3>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Vec预分配容量</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 使用&amp;str而非String（参数）</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 迭代器链优于多次循环</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 避免不必要的collect</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 大对象传引用或移动</p></li>
</ul>
</section>
<section id="id21">
<h3>错误处理<a class="headerlink" href="#id21" title="Permalink to this heading"></a></h3>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 库返回Result</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 应用使用anyhow</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 避免unwrap（生产环境）</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 使用?简化错误传播</p></li>
</ul>
</section>
<section id="id22">
<h3>并发<a class="headerlink" href="#id22" title="Permalink to this heading"></a></h3>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 优先消息传递</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 共享状态用Arc&lt;Mutex<T>&gt;</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 避免死锁（固定加锁顺序）</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 使用Rayon处理数据并行</p></li>
</ul>
</section>
<section id="id23">
<h3>代码质量<a class="headerlink" href="#id23" title="Permalink to this heading"></a></h3>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 运行clippy</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 运行rustfmt</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 编写测试</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 添加文档注释</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 使用#[must_use]标记</p></li>
</ul>
<p><strong>核心：</strong> 编译器错误是助手，运行时错误需预防。性能优化先测量，unsafe需文档说明。</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="05-async.html" class="btn btn-neutral float-left" title="05-异步编程" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../shell/index.html" class="btn btn-neutral float-right" title="Shell 教程" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Code Dojo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>