

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>03-数据结构与标准库 &mdash; Backend Tutorial 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=2d0851c8" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=af2ce170"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/copy-code.js?v=caf91246"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="04-Python高级特性" href="04-advanced-features.html" />
    <link rel="prev" title="02-Python基础语法" href="02-basic-syntax.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            Backend Tutorial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Backend Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/index.html">C++ 教程</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python 教程</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">Python 后端开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="01-environment-setup.html">01-Python环境搭建</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-basic-syntax.html">02-Python基础语法</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">03-数据结构与标准库</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#collections">collections模块</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#counter">Counter（计数器）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defaultdict">defaultdict（默认字典）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deque">deque（双端队列）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#namedtuple">namedtuple（命名元组）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ordereddict">OrderedDict（有序字典）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chainmap">ChainMap（链式字典）</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#itertools">itertools模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#functools">functools模块</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">高阶函数</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#datetime">datetime模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pathlib">pathlib模块（路径操作）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#re">re模块（正则表达式）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#json">json模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ossys">os和sys模块</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#os">os模块（操作系统接口）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sys-python">sys模块（Python解释器）</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#random">random模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#math">math模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy">copy模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typing">typing模块（类型提示）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataclasses">dataclasses（数据类）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argparse">argparse（命令行参数）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging">logging（日志）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">常用模块速查</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="04-advanced-features.html">04-Python高级特性</a></li>
<li class="toctree-l2"><a class="reference internal" href="05-file-processing.html">05-文件与数据处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="06-web-development.html">06-Python Web开发</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../java/index.html">Java 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodejs/index.html">Node.js 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../go/index.html">Golang 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust/index.html">Rust 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/index.html">Shell 教程</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Backend Tutorial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Python 教程</a></li>
      <li class="breadcrumb-item active">03-数据结构与标准库</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/python/03-data-structures.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>03-数据结构与标准库<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h1>
<p>Python标准库功能强大，涵盖数据结构、文件处理、网络、并发等。”batteries included”理念。</p>
<section id="collections">
<h2>collections模块<a class="headerlink" href="#collections" title="Permalink to this heading"></a></h2>
<section id="counter">
<h3>Counter（计数器）<a class="headerlink" href="#counter" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span>

<span class="c1"># 创建</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">]</span>
<span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>  <span class="c1"># Counter({&#39;apple&#39;: 3, &#39;banana&#39;: 2, &#39;cherry&#39;: 1})</span>

<span class="c1"># 常用操作</span>
<span class="n">counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>      <span class="c1"># [(&#39;apple&#39;, 3), (&#39;banana&#39;, 2)]</span>
<span class="n">counter</span><span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">]</span>            <span class="c1"># 3</span>
<span class="n">counter</span><span class="p">[</span><span class="s1">&#39;orange&#39;</span><span class="p">]</span>           <span class="c1"># 0（不存在返回0）</span>

<span class="c1"># 运算</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">c1</span> <span class="o">+</span> <span class="n">c2</span>                     <span class="c1"># Counter({&#39;a&#39;: 4, &#39;b&#39;: 3})</span>
<span class="n">c1</span> <span class="o">-</span> <span class="n">c2</span>                     <span class="c1"># Counter({&#39;a&#39;: 2})</span>
<span class="n">c1</span> <span class="o">&amp;</span> <span class="n">c2</span>                     <span class="c1"># Counter({&#39;a&#39;: 1, &#39;b&#39;: 1})（最小值）</span>
<span class="n">c1</span> <span class="o">|</span> <span class="n">c2</span>                     <span class="c1"># Counter({&#39;a&#39;: 3, &#39;b&#39;: 2})（最大值）</span>

<span class="c1"># 应用：单词频率统计</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;hello world hello python&quot;</span>
<span class="n">Counter</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="defaultdict">
<h3>defaultdict（默认字典）<a class="headerlink" href="#defaultdict" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

<span class="c1"># 普通dict问题</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># d[&#39;key&#39;] += 1  # KeyError</span>

<span class="c1"># defaultdict解决方案</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># 默认值0</span>
<span class="n">d</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>         <span class="c1"># OK</span>

<span class="c1"># 默认值类型</span>
<span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>     <span class="c1"># []</span>
<span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>      <span class="c1"># set()</span>
<span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span>

<span class="c1"># 应用：分组</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">grouped</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="n">grouped</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># {&#39;a&#39;: [1, 3], &#39;b&#39;: [2]}</span>
</pre></div>
</div>
</section>
<section id="deque">
<h3>deque（双端队列）<a class="headerlink" href="#deque" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>

<span class="c1"># 创建</span>
<span class="n">dq</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">dq</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># 限定长度，自动删除旧元素</span>

<span class="c1"># 操作（O(1)）</span>
<span class="n">dq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>          <span class="c1"># 右端添加</span>
<span class="n">dq</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>      <span class="c1"># 左端添加</span>
<span class="n">dq</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>              <span class="c1"># 右端删除</span>
<span class="n">dq</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>          <span class="c1"># 左端删除</span>
<span class="n">dq</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>     <span class="c1"># 右端扩展</span>
<span class="n">dq</span><span class="o">.</span><span class="n">extendleft</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># 左端扩展</span>
<span class="n">dq</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>          <span class="c1"># 右旋转2位</span>

<span class="c1"># 应用：滑动窗口、LRU缓存</span>
</pre></div>
</div>
</section>
<section id="namedtuple">
<h3>namedtuple（命名元组）<a class="headerlink" href="#namedtuple" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">namedtuple</span>

<span class="c1"># 定义</span>
<span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="s1">&#39;x y&#39;</span><span class="p">)</span>  <span class="c1"># 等价</span>

<span class="c1"># 使用</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">x</span>            <span class="c1"># 3</span>
<span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>           <span class="c1"># 3</span>
<span class="n">p</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>    <span class="c1"># {&#39;x&#39;: 3, &#39;y&#39;: 4}</span>

<span class="c1"># 不可变</span>
<span class="c1"># p.x = 5      # AttributeError</span>

<span class="c1"># 应用：轻量级数据类</span>
<span class="n">Person</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Person&#39;</span><span class="p">,</span> <span class="s1">&#39;name age city&#39;</span><span class="p">)</span>
<span class="n">alice</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;Beijing&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ordereddict">
<h3>OrderedDict（有序字典）<a class="headerlink" href="#ordereddict" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="c1"># Python 3.7+普通dict也保持插入顺序</span>
<span class="c1"># OrderedDict额外提供：</span>
<span class="n">od</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">od</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">od</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">od</span><span class="o">.</span><span class="n">move_to_end</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>   <span class="c1"># 移动到末尾</span>
<span class="n">od</span><span class="o">.</span><span class="n">popitem</span><span class="p">(</span><span class="n">last</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># 删除第一个</span>
</pre></div>
</div>
</section>
<section id="chainmap">
<h3>ChainMap（链式字典）<a class="headerlink" href="#chainmap" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChainMap</span>

<span class="c1"># 多个字典合并视图</span>
<span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;guest&#39;</span><span class="p">}</span>
<span class="n">user_prefs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">}</span>

<span class="n">combined</span> <span class="o">=</span> <span class="n">ChainMap</span><span class="p">(</span><span class="n">user_prefs</span><span class="p">,</span> <span class="n">defaults</span><span class="p">)</span>
<span class="n">combined</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>   <span class="c1"># &#39;admin&#39;（优先第一个）</span>
<span class="n">combined</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>  <span class="c1"># &#39;red&#39;</span>

<span class="c1"># 应用：配置管理（命令行 &gt; 环境变量 &gt; 默认值）</span>
</pre></div>
</div>
</section>
</section>
<section id="itertools">
<h2>itertools模块<a class="headerlink" href="#itertools" title="Permalink to this heading"></a></h2>
<p>无限迭代器和组合迭代器。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="c1"># 无限迭代器</span>
<span class="n">count</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>          <span class="c1"># 10, 11, 12, ...</span>
<span class="n">cycle</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>   <span class="c1"># 1, 2, 3, 1, 2, 3, ...</span>
<span class="n">repeat</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>      <span class="c1"># 10, 10, 10</span>

<span class="c1"># 组合迭代器</span>
<span class="n">chain</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>        <span class="c1"># 1, 2, 3, 4</span>
<span class="n">zip_longest</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">fillvalue</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># (1,3), (2,4), (0,5)</span>

<span class="c1"># 过滤</span>
<span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1"># 2, 4, 6（切片）</span>
<span class="n">takewhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>  <span class="c1"># 1,2,3,4</span>
<span class="n">dropwhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>  <span class="c1"># 5,6</span>
<span class="n">filterfalse</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>    <span class="c1"># 2,4</span>

<span class="c1"># 分组</span>
<span class="n">groupby</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>

<span class="c1"># 组合数学</span>
<span class="n">permutations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>     <span class="c1"># 排列：(1,2), (1,3), (2,1), ...</span>
<span class="n">combinations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>     <span class="c1"># 组合：(1,2), (1,3), (2,3)</span>
<span class="n">product</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>        <span class="c1"># 笛卡尔积：(1,3), (1,4), (2,3), (2,4)</span>

<span class="c1"># 累积</span>
<span class="n">accumulate</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>      <span class="c1"># 1, 3, 6, 10, 15（累加）</span>
<span class="n">accumulate</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>  <span class="c1"># 累乘</span>
</pre></div>
</div>
</section>
<section id="functools">
<h2>functools模块<a class="headerlink" href="#functools" title="Permalink to this heading"></a></h2>
<section id="id2">
<h3>高阶函数<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="c1"># reduce（累积）</span>
<span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>  <span class="c1"># 10</span>

<span class="c1"># partial（偏函数）</span>
<span class="k">def</span><span class="w"> </span><span class="nf">power</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exponent</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">base</span> <span class="o">**</span> <span class="n">exponent</span>

<span class="n">square</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">power</span><span class="p">,</span> <span class="n">exponent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">square</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <span class="c1"># 25</span>

<span class="n">cube</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">power</span><span class="p">,</span> <span class="n">exponent</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">cube</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>        <span class="c1"># 125</span>

<span class="c1"># lru_cache（LRU缓存）</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

<span class="n">fibonacci</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># 快速计算（有缓存）</span>
<span class="n">fibonacci</span><span class="o">.</span><span class="n">cache_info</span><span class="p">()</span>  <span class="c1"># 查看缓存统计</span>

<span class="c1"># wraps（保留元数据）</span>
<span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>  <span class="c1"># 保留原函数的__name__、__doc__</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="c1"># cmp_to_key（排序转换）</span>
<span class="nb">sorted</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<section id="datetime">
<h2>datetime模块<a class="headerlink" href="#datetime" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="c1"># 当前时间</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">today</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>

<span class="c1"># 创建时间</span>
<span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>

<span class="c1"># 格式化</span>
<span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>  <span class="c1"># &quot;2024-01-01 12:30:45&quot;</span>
<span class="n">dt</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>                     <span class="c1"># &quot;2024-01-01T12:30:45&quot;</span>

<span class="c1"># 解析</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s2">&quot;2024-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 时间运算</span>
<span class="n">tomorrow</span> <span class="o">=</span> <span class="n">today</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">week_ago</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">dt2</span> <span class="o">-</span> <span class="n">dt1</span>  <span class="c1"># timedelta对象</span>

<span class="c1"># 时间戳</span>
<span class="n">dt</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>                     <span class="c1"># 秒级时间戳</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="mi">1234567890</span><span class="p">)</span> <span class="c1"># 时间戳转datetime</span>

<span class="c1"># 属性</span>
<span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">day</span>
<span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">second</span>
<span class="n">dt</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>   <span class="c1"># 0=Monday</span>
</pre></div>
</div>
</section>
<section id="pathlib">
<h2>pathlib模块（路径操作）<a class="headerlink" href="#pathlib" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># 创建路径</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;folder/file.txt&#39;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;documents&#39;</span> <span class="o">/</span> <span class="s1">&#39;file.txt&#39;</span>  <span class="c1"># 路径拼接</span>

<span class="c1"># 路径信息</span>
<span class="n">p</span><span class="o">.</span><span class="n">name</span>         <span class="c1"># &#39;file.txt&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">stem</span>         <span class="c1"># &#39;file&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">suffix</span>       <span class="c1"># &#39;.txt&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">parent</span>       <span class="c1"># &#39;folder&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">parts</span>        <span class="c1"># (&#39;folder&#39;, &#39;file.txt&#39;)</span>
<span class="n">p</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>   <span class="c1"># 绝对路径</span>

<span class="c1"># 文件操作</span>
<span class="n">p</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>     <span class="c1"># 是否存在</span>
<span class="n">p</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span>       <span class="c1"># 文件信息</span>
<span class="n">p</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>  <span class="c1"># 读取文本</span>
<span class="n">p</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;content&quot;</span><span class="p">)</span>

<span class="c1"># 目录操作</span>
<span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">rmdir</span><span class="p">()</span>      <span class="c1"># 删除空目录</span>
<span class="n">p</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>     <span class="c1"># 删除文件</span>

<span class="c1"># 遍历</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">iterdir</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c1"># 模式匹配</span>
<span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.txt&#39;</span><span class="p">))</span>          <span class="c1"># 当前目录</span>
<span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s1">&#39;*.txt&#39;</span><span class="p">))</span>         <span class="c1"># 递归查找</span>
</pre></div>
</div>
</section>
<section id="re">
<h2>re模块（正则表达式）<a class="headerlink" href="#re" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>

<span class="c1"># 匹配</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\d+&#39;</span>
<span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s1">&#39;123abc&#39;</span><span class="p">)</span>    <span class="c1"># 从头匹配</span>
<span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s1">&#39;abc123&#39;</span><span class="p">)</span>   <span class="c1"># 任意位置</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s1">&#39;12 34 56&#39;</span><span class="p">)</span>  <span class="c1"># [&#39;12&#39;, &#39;34&#39;, &#39;56&#39;]</span>
<span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s1">&#39;12 34&#39;</span><span class="p">)</span>  <span class="c1"># 迭代器</span>

<span class="c1"># 替换</span>
<span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;abc123def456&#39;</span><span class="p">)</span>  <span class="c1"># &#39;abcXdefX&#39;</span>
<span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;abc123&#39;</span><span class="p">)</span>       <span class="c1"># (&#39;abcX&#39;, 1)</span>

<span class="c1"># 分割</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[,;]&#39;</span><span class="p">,</span> <span class="s1">&#39;a,b;c&#39;</span><span class="p">)</span>     <span class="c1"># [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>

<span class="c1"># 编译（重复使用时提高性能）</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">)</span>
<span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;12 34 56&#39;</span><span class="p">)</span>

<span class="c1"># 分组</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d</span><span class="si">{4}</span><span class="s1">)-(\d</span><span class="si">{2}</span><span class="s1">)-(\d</span><span class="si">{2}</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="s1">&#39;2024-01-15&#39;</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># &#39;2024-01-15&#39;（整个匹配）</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># &#39;2024&#39;（第一组）</span>
<span class="k">match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>  <span class="c1"># (&#39;2024&#39;, &#39;01&#39;, &#39;15&#39;)</span>

<span class="c1"># 命名分组</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?P&lt;year&gt;\d</span><span class="si">{4}</span><span class="s1">)-(?P&lt;month&gt;\d</span><span class="si">{2}</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="s1">&#39;2024-01-15&#39;</span><span class="p">)</span>
<span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>  <span class="c1"># &#39;2024&#39;</span>

<span class="c1"># 常用模式</span>
<span class="sa">r</span><span class="s1">&#39;\d&#39;</span>          <span class="c1"># 数字</span>
<span class="sa">r</span><span class="s1">&#39;\w&#39;</span>          <span class="c1"># 字母数字下划线</span>
<span class="sa">r</span><span class="s1">&#39;\s&#39;</span>          <span class="c1"># 空白字符</span>
<span class="sa">r</span><span class="s1">&#39;.&#39;</span>           <span class="c1"># 任意字符（除换行）</span>
<span class="sa">r</span><span class="s1">&#39;^&#39;</span>           <span class="c1"># 行首</span>
<span class="sa">r</span><span class="s1">&#39;$&#39;</span>           <span class="c1"># 行尾</span>
<span class="sa">r</span><span class="s1">&#39;*&#39;</span>           <span class="c1"># 0次或多次</span>
<span class="sa">r</span><span class="s1">&#39;+&#39;</span>           <span class="c1"># 1次或多次</span>
<span class="sa">r</span><span class="s1">&#39;?&#39;</span>           <span class="c1"># 0次或1次</span>
<span class="sa">r</span><span class="s1">&#39;</span><span class="si">{n}</span><span class="s1">&#39;</span>         <span class="c1"># 恰好n次</span>
<span class="sa">r</span><span class="s1">&#39;{n,m}&#39;</span>       <span class="c1"># n到m次</span>
</pre></div>
</div>
</section>
<section id="json">
<h2>json模块<a class="headerlink" href="#json" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="c1"># Python对象 → JSON字符串</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;scores&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">92</span><span class="p">]}</span>
<span class="n">json_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># JSON字符串 → Python对象</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>

<span class="c1"># 文件操作</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># 自定义序列化</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Student</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

<span class="k">def</span><span class="w"> </span><span class="nf">student_encoder</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Student</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">age</span><span class="p">}</span>
    <span class="k">raise</span> <span class="ne">TypeError</span>

<span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">student_encoder</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ossys">
<h2>os和sys模块<a class="headerlink" href="#ossys" title="Permalink to this heading"></a></h2>
<section id="os">
<h3>os模块（操作系统接口）<a class="headerlink" href="#os" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="c1"># 当前目录</span>
<span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/path&#39;</span><span class="p">)</span>

<span class="c1"># 环境变量</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;HOME&#39;</span><span class="p">]</span>
<span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;PATH&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span>

<span class="c1"># 文件操作</span>
<span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;old.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;new.txt&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s1">&#39;folder&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s1">&#39;a/b/c&#39;</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="s1">&#39;folder&#39;</span><span class="p">)</span>

<span class="c1"># 路径操作</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;folder&#39;</span><span class="p">,</span> <span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s1">&#39;folder&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;/path/to/file.txt&#39;</span><span class="p">)</span>  <span class="c1"># &#39;file.txt&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="s1">&#39;/path/to/file.txt&#39;</span><span class="p">)</span>   <span class="c1"># &#39;/path/to&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>           <span class="c1"># (&#39;file&#39;, &#39;.txt&#39;)</span>

<span class="c1"># 执行命令</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;ls -l&#39;</span><span class="p">)</span>

<span class="c1"># 遍历目录</span>
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s1">&#39;/path&#39;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="sys-python">
<h3>sys模块（Python解释器）<a class="headerlink" href="#sys-python" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="c1"># 命令行参数</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span>  <span class="c1"># [&#39;script.py&#39;, &#39;arg1&#39;, &#39;arg2&#39;]</span>

<span class="c1"># 路径</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span>  <span class="c1"># 模块搜索路径</span>
<span class="n">sys</span><span class="o">.</span><span class="n">executable</span>  <span class="c1"># Python解释器路径</span>

<span class="c1"># 版本</span>
<span class="n">sys</span><span class="o">.</span><span class="n">version</span>
<span class="n">sys</span><span class="o">.</span><span class="n">version_info</span>  <span class="c1"># (3, 9, 0, &#39;final&#39;, 0)</span>

<span class="c1"># 标准流</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdin</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stderr</span>

<span class="c1"># 退出</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="random">
<h2>random模块<a class="headerlink" href="#random" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="c1"># 随机整数</span>
<span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>     <span class="c1"># [1, 10]</span>
<span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># [0, 10)，步长2</span>

<span class="c1"># 随机浮点数</span>
<span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>           <span class="c1"># [0.0, 1.0)</span>
<span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span> <span class="c1"># [1.0, 10.0]</span>

<span class="c1"># 序列操作</span>
<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>        <span class="c1"># 随机选择一个</span>
<span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">lst</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># 可重复选择3个</span>
<span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">lst</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>     <span class="c1"># 不重复选择3个</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>       <span class="c1"># 原地洗牌</span>

<span class="c1"># 设置种子（可复现）</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="math">
<h2>math模块<a class="headerlink" href="#math" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">math</span>

<span class="c1"># 常数</span>
<span class="n">math</span><span class="o">.</span><span class="n">pi</span>        <span class="c1"># 3.141592653589793</span>
<span class="n">math</span><span class="o">.</span><span class="n">e</span>         <span class="c1"># 2.718281828459045</span>
<span class="n">math</span><span class="o">.</span><span class="n">inf</span>       <span class="c1"># 无穷大</span>
<span class="n">math</span><span class="o">.</span><span class="n">nan</span>       <span class="c1"># NaN</span>

<span class="c1"># 基本函数</span>
<span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="mf">3.2</span><span class="p">)</span>   <span class="c1"># 4（向上取整）</span>
<span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mf">3.8</span><span class="p">)</span>  <span class="c1"># 3（向下取整）</span>
<span class="n">math</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="mf">3.8</span><span class="p">)</span>  <span class="c1"># 3（截断）</span>
<span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="o">-</span><span class="mf">5.5</span><span class="p">)</span>  <span class="c1"># 5.5（绝对值）</span>

<span class="c1"># 幂和对数</span>
<span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>    <span class="c1"># 4.0</span>
<span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>   <span class="c1"># 8.0</span>
<span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1"># 3.0（以2为底）</span>
<span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># 2.0</span>
<span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>     <span class="c1"># 3.0</span>

<span class="c1"># 三角函数</span>
<span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1"># 1.0</span>
<span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>             <span class="c1"># 1.0</span>
<span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>   <span class="c1"># 1.0</span>

<span class="c1"># 其他</span>
<span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>       <span class="c1"># 120</span>
<span class="n">math</span><span class="o">.</span><span class="n">gcd</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>        <span class="c1"># 6（最大公约数）</span>
<span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">math</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="copy">
<h2>copy模块<a class="headerlink" href="#copy" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>

<span class="c1"># 浅拷贝</span>
<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">shallow</span> <span class="o">=</span> <span class="n">lst</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>           <span class="c1"># 或list(lst)或lst[:]</span>
<span class="n">shallow</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>

<span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">999</span>
<span class="nb">print</span><span class="p">(</span><span class="n">shallow</span><span class="p">)</span>  <span class="c1"># [1, 2, [999, 4]]（内部列表共享！）</span>

<span class="c1"># 深拷贝</span>
<span class="n">deep</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="n">deep</span><span class="p">)</span>     <span class="c1"># [1, 2, [3, 4]]（完全独立）</span>
</pre></div>
</div>
</section>
<section id="typing">
<h2>typing模块（类型提示）<a class="headerlink" href="#typing" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Any</span>

<span class="c1"># 容器类型</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;sum&quot;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)}</span>

<span class="c1"># 可选类型</span>
<span class="k">def</span><span class="w"> </span><span class="nf">find</span><span class="p">(</span><span class="n">lst</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">target</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">lst</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="k">if</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">lst</span> <span class="k">else</span> <span class="kc">None</span>

<span class="c1"># 联合类型</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="c1"># Python 3.10+简化</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># 函数类型</span>
<span class="n">Callback</span> <span class="o">=</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">apply</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callback</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="c1"># 泛型</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Generic</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Stack</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="dataclasses">
<h2>dataclasses（数据类）<a class="headerlink" href="#dataclasses" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>

<span class="c1"># 自动生成__init__、__repr__、__eq__等</span>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Point</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 默认值</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>  <span class="c1"># Point(x=3, y=4, z=0)</span>

<span class="c1"># 更多选项</span>
<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># 不可变</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ImmutablePoint</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># 支持比较</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SortablePoint</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span>

<span class="c1"># 字段选项</span>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Student</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">scores</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>  <span class="c1"># 可变默认值</span>
    <span class="n">internal</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>    <span class="c1"># 不在__init__和__repr__中</span>
</pre></div>
</div>
</section>
<section id="argparse">
<h2>argparse（命令行参数）<a class="headerlink" href="#argparse" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Process some integers.&#39;</span><span class="p">)</span>

<span class="c1"># 位置参数</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;input file&#39;</span><span class="p">)</span>

<span class="c1"># 可选参数</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--output&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;out.txt&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--number&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 选择参数</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--mode&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;fast&#39;</span><span class="p">,</span> <span class="s1">&#39;slow&#39;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;fast&#39;</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="logging">
<h2>logging（日志）<a class="headerlink" href="#logging" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="c1"># 基本配置</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;app.log&#39;</span>
<span class="p">)</span>

<span class="c1"># 日志级别</span>
<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;debug message&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;info message&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;warning message&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;error message&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;critical message&#39;</span><span class="p">)</span>

<span class="c1"># 自定义logger</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s1">&#39;custom.log&#39;</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>

<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;custom log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2>常用模块速查<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 文本处理</span>
<span class="n">string</span>         <span class="c1"># 字符串常量和模板</span>
<span class="n">textwrap</span>       <span class="c1"># 文本换行和填充</span>

<span class="c1"># 数据结构</span>
<span class="n">heapq</span>          <span class="c1"># 堆队列</span>
<span class="n">bisect</span>         <span class="c1"># 二分查找</span>
<span class="n">array</span>          <span class="c1"># 数组（比list省内存）</span>

<span class="c1"># 数学</span>
<span class="n">statistics</span>     <span class="c1"># 统计函数</span>
<span class="n">decimal</span>        <span class="c1"># 精确小数</span>
<span class="n">fractions</span>      <span class="c1"># 分数</span>

<span class="c1"># 文件格式</span>
<span class="n">csv</span>            <span class="c1"># CSV文件</span>
<span class="n">configparser</span>   <span class="c1"># INI配置文件</span>
<span class="n">pickle</span>         <span class="c1"># 序列化</span>

<span class="c1"># 压缩</span>
<span class="n">gzip</span><span class="p">,</span> <span class="n">bz2</span><span class="p">,</span> <span class="n">zipfile</span><span class="p">,</span> <span class="n">tarfile</span>

<span class="c1"># 并发</span>
<span class="n">threading</span>      <span class="c1"># 线程</span>
<span class="n">multiprocessing</span> <span class="c1"># 进程</span>
<span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span>  <span class="c1"># 高级并发接口</span>
<span class="n">asyncio</span>        <span class="c1"># 异步IO</span>

<span class="c1"># 网络</span>
<span class="n">socket</span>         <span class="c1"># 底层网络</span>
<span class="n">http</span><span class="o">.</span><span class="n">server</span>    <span class="c1"># HTTP服务器</span>
<span class="n">urllib</span>         <span class="c1"># URL处理</span>
<span class="n">requests</span>       <span class="c1"># HTTP库（第三方）</span>

<span class="c1"># 数据库</span>
<span class="n">sqlite3</span>        <span class="c1"># SQLite</span>
</pre></div>
</div>
<p><strong>核心：</strong> Python标准库功能全面，优先使用标准库而非第三方库。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="02-basic-syntax.html" class="btn btn-neutral float-left" title="02-Python基础语法" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="04-advanced-features.html" class="btn btn-neutral float-right" title="04-Python高级特性" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Code Dojo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>