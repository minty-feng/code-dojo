# 03-å“ˆå¸Œè¡¨

## ğŸ’¡ æ ¸å¿ƒç»“è®º

### å“ˆå¸Œè¡¨æœ¬è´¨
- **åŸç†**ï¼šé€šè¿‡å“ˆå¸Œå‡½æ•°å°†keyæ˜ å°„åˆ°æ•°ç»„ç´¢å¼•ï¼ŒO(1)è®¿é—®
- **æ€§èƒ½**ï¼šå¹³å‡O(1)æŸ¥æ‰¾/æ’å…¥/åˆ é™¤ï¼Œæœ€åO(n)
- **æ ¸å¿ƒ**ï¼šå¥½çš„å“ˆå¸Œå‡½æ•° + åˆé€‚çš„å†²çªè§£å†³ = é«˜æ€§èƒ½
- **è´Ÿè½½å› å­**ï¼šÎ± = n/mï¼ŒÎ± < 0.75æ€§èƒ½è‰¯å¥½ï¼Œè¶…è¿‡éœ€æ‰©å®¹
- **åº”ç”¨**ï¼šç¼“å­˜ã€å»é‡ã€è®¡æ•°ã€ç´¢å¼•

### å†²çªè§£å†³
- **é“¾åœ°å€æ³•**ï¼šæ¯ä¸ªæ§½ä½å­˜é“¾è¡¨ï¼Œç®€å•ä½†æŒ‡é’ˆå¼€é”€å¤§
- **å¼€æ”¾å¯»å€**ï¼šçº¿æ€§æ¢æµ‹/äºŒæ¬¡æ¢æµ‹/åŒé‡å“ˆå¸Œï¼Œç¼“å­˜å‹å¥½ä½†èšé›†é—®é¢˜
- **é€‰æ‹©**ï¼šé“¾åœ°å€æ³•æ›´å¸¸ç”¨ï¼ˆJava HashMapã€Python dictï¼‰

### å“ˆå¸Œå‡½æ•°è¦æ±‚
1. **ç¡®å®šæ€§**ï¼šç›¸åŒè¾“å…¥â†’ç›¸åŒè¾“å‡º
2. **å‡åŒ€åˆ†å¸ƒ**ï¼šå‡å°‘å†²çª
3. **å¿«é€Ÿè®¡ç®—**ï¼šä¿è¯O(1)
4. **é›ªå´©æ•ˆåº”**ï¼šè¾“å…¥å¾®å˜åŒ–â†’è¾“å‡ºå·¨å˜

### æ€§èƒ½å…³é”®
| å› ç´  | å½±å“ |
|------|------|
| å¥½çš„å“ˆå¸Œå‡½æ•° | å‡å°‘å†²çª |
| ä½è´Ÿè½½å› å­ | å‡å°‘å†²çª |
| åˆç†æ‰©å®¹ | ä¿æŒæ€§èƒ½ |
| å†²çªè§£å†³æ–¹æ³• | æœ€åæƒ…å†µæ€§èƒ½ |

## ğŸ¯ å“ˆå¸Œè¡¨åŸç†

### æ ¸å¿ƒæ€æƒ³
é€šè¿‡å“ˆå¸Œå‡½æ•°å°†keyæ˜ å°„åˆ°æ•°ç»„ç´¢å¼•ï¼Œå®ç°O(1)çš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ã€‚

```
key --[hash function]--> index --> value
"John" --> å“ˆå¸Œ --> 5 --> {name: "John", age: 30}
```

### æ—¶é—´å¤æ‚åº¦
| æ“ä½œ | å¹³å‡ | æœ€å |
|------|------|------|
| æŸ¥æ‰¾ | O(1) | O(n) |
| æ’å…¥ | O(1) | O(n) |
| åˆ é™¤ | O(1) | O(n) |

## ğŸ”‘ å“ˆå¸Œå‡½æ•°

### å¥½çš„å“ˆå¸Œå‡½æ•°ç‰¹ç‚¹
1. ç¡®å®šæ€§ï¼šç›¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡º
2. å¿«é€Ÿè®¡ç®—
3. å‡åŒ€åˆ†å¸ƒ
4. é›ªå´©æ•ˆåº”ï¼šè¾“å…¥å¾®å°å˜åŒ–å¯¼è‡´è¾“å‡ºå·¨å¤§å˜åŒ–

### å¸¸è§å“ˆå¸Œå‡½æ•°
```python
# é™¤æ³•å“ˆå¸Œ
def hash_division(key, table_size):
    return key % table_size

# ä¹˜æ³•å“ˆå¸Œ
def hash_multiplication(key, table_size):
    A = 0.6180339887  # (âˆš5 - 1) / 2
    return int(table_size * ((key * A) % 1))

# å­—ç¬¦ä¸²å“ˆå¸Œ
def hash_string(s, table_size):
    hash_val = 0
    for char in s:
        hash_val = (hash_val * 31 + ord(char)) % table_size
    return hash_val
```

## ğŸ’¥ å†²çªè§£å†³

### 1. é“¾åœ°å€æ³•ï¼ˆChainingï¼‰
```
Index | Linked List
------|-------------
  0   | -> key1 -> key5
  1   | -> key2
  2   | (empty)
  3   | -> key3 -> key6 -> key8
  4   | -> key4
```

ä¼˜ç‚¹ï¼š
- å®ç°ç®€å•
- å¯¹å“ˆå¸Œå‡½æ•°è¦æ±‚ä½
- è´Ÿè½½å› å­å¯ä»¥>1

ç¼ºç‚¹ï¼š
- é¢å¤–æŒ‡é’ˆå¼€é”€
- ç¼“å­˜æ€§èƒ½å·®

### 2. å¼€æ”¾å¯»å€æ³•ï¼ˆOpen Addressingï¼‰

#### çº¿æ€§æ¢æµ‹
```
hash(key) = h
æ¢æµ‹åºåˆ—: h, h+1, h+2, h+3, ...
```

ä¼˜ç‚¹ï¼šç¼“å­˜å‹å¥½
ç¼ºç‚¹ï¼šèšé›†é—®é¢˜

#### äºŒæ¬¡æ¢æµ‹
```
æ¢æµ‹åºåˆ—: h, h+1Â², h+2Â², h+3Â², ...
```

#### åŒé‡å“ˆå¸Œ
```
h1(key) = key % m
h2(key) = 1 + (key % (m-1))
æ¢æµ‹åºåˆ—: h1, h1+h2, h1+2h2, h1+3h2, ...
```

## ğŸ“Š è´Ÿè½½å› å­

```
è´Ÿè½½å› å­ Î± = n / m
n: å·²å­˜å‚¨å…ƒç´ æ•°
m: å“ˆå¸Œè¡¨å¤§å°

é“¾åœ°å€æ³•ï¼šÎ± < 1.0 æ€§èƒ½è‰¯å¥½
å¼€æ”¾å¯»å€ï¼šÎ± < 0.7 æ€§èƒ½è‰¯å¥½

æ‰©å®¹è§¦å‘ï¼šÎ± > 0.75ï¼ˆJava HashMapï¼‰
```

## ğŸ”§ åŠ¨æ€æ‰©å®¹

### æ‰©å®¹ç­–ç•¥
1. åˆ›å»ºæ–°è¡¨ï¼ˆé€šå¸¸2å€å¤§å°ï¼‰
2. é‡æ–°å“ˆå¸Œæ‰€æœ‰å…ƒç´ ï¼ˆrehashï¼‰
3. æ›¿æ¢æ—§è¡¨

### Rehashè¿‡ç¨‹
```python
def resize(self):
    old_table = self.table
    self.capacity *= 2
    self.table = [[] for _ in range(self.capacity)]
    self.size = 0
    
    for bucket in old_table:
        for key, value in bucket:
            self.insert(key, value)
```

## ğŸ’¡ åº”ç”¨åœºæ™¯

### ç¼“å­˜
- LRUç¼“å­˜
- Redis
- Memcached

### æ•°æ®åº“ç´¢å¼•
- Hashç´¢å¼•
- å¿«é€ŸæŸ¥æ‰¾

### å»é‡
- ç»Ÿè®¡ä¸é‡å¤å…ƒç´ 
- é›†åˆè¿ç®—

### è®¡æ•°
- è¯é¢‘ç»Ÿè®¡
- æŠ•ç¥¨ç³»ç»Ÿ

## ğŸ“š LeetCodeç»ƒä¹ 

- [1. Two Sum](https://leetcode.com/problems/two-sum/)
- [49. Group Anagrams](https://leetcode.com/problems/group-anagrams/)
- [146. LRU Cache](https://leetcode.com/problems/lru-cache/)
- [387. First Unique Character](https://leetcode.com/problems/first-unique-character-in-a-string/)

## ğŸ’» å®Œæ•´ä»£ç å®ç°

### Python å®ç°

```{literalinclude} hash_table.py
:language: python
:linenos:
```

### C++ å®ç°

```{literalinclude} hash_table.cpp
:language: cpp
:linenos:
```

