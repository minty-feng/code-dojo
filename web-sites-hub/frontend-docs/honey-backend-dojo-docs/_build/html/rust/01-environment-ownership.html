

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>01-Rustç¯å¢ƒæ­å»ºä¸æ‰€æœ‰æƒ &mdash; Backend Tutorial 1.0.0 æ–‡æ¡£</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f07cb45e" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=34088549"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="next" title="02-RuståŸºç¡€è¯­æ³•" href="02-basic-syntax.html" />
    <link rel="prev" title="ğŸ¦€ Rust å¼€å‘" href="README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            Backend Tutorial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <p class="caption" role="heading"><span class="caption-text">ç›®å½•</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Backend Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/index.html">C++ æ•™ç¨‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python æ•™ç¨‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/index.html">Java æ•™ç¨‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodejs/index.html">Node.js æ•™ç¨‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../go/index.html">Golang æ•™ç¨‹</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Rust æ•™ç¨‹</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">Rust å¼€å‘</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">01-Rustç¯å¢ƒæ­å»ºä¸æ‰€æœ‰æƒ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Rustç®€ä»‹</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">è®¾è®¡ç›®æ ‡</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">åº”ç”¨åœºæ™¯</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">è¯­è¨€ç‰¹ç‚¹</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id5">ç¯å¢ƒå®‰è£…</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rustup">rustupï¼ˆæ¨èï¼‰</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">å·¥å…·é“¾ç®¡ç†</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cargo">CargoåŒ…ç®¡ç†</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">åŸºæœ¬å‘½ä»¤</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cargo-toml">Cargo.tomlé…ç½®</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id8">å¼€å‘å·¥å…·</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vs-code">VS Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#intellij-idea">IntelliJ IDEA</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hello-world">Hello World</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">åŸºæœ¬ç¨‹åº</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">é¡¹ç›®ç»“æ„</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id11">æ‰€æœ‰æƒç³»ç»Ÿ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">ä¸‰æ¡è§„åˆ™</a></li>
<li class="toctree-l4"><a class="reference internal" href="#move">ç§»åŠ¨ï¼ˆMoveï¼‰</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clone">å…‹éš†ï¼ˆCloneï¼‰</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copy-trait">Copy trait</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">å‡½æ•°å’Œæ‰€æœ‰æƒ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">è¿”å›å€¼å’Œæ‰€æœ‰æƒ</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id15">å¼•ç”¨å’Œå€Ÿç”¨</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">ä¸å¯å˜å¼•ç”¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">å¯å˜å¼•ç”¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">å€Ÿç”¨è§„åˆ™</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#slice">åˆ‡ç‰‡ï¼ˆSliceï¼‰</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">å­—ç¬¦ä¸²åˆ‡ç‰‡</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">æ•°ç»„åˆ‡ç‰‡</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id21">æ‰€æœ‰æƒæ¨¡å¼æ€»ç»“</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">ä½•æ—¶ä½¿ç”¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">å¸¸è§é”™è¯¯</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id24">æ‰€æœ‰æƒçš„ä¼˜åŠ¿</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id25">å†…å­˜å®‰å…¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">å¹¶å‘å®‰å…¨</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id27">æ€§èƒ½</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id28">é›¶æˆæœ¬æŠ½è±¡</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c">ä¸C++å¯¹æ¯”</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id29">æœ€ä½³å®è·µ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id30">1. ä¼˜å…ˆå€Ÿç”¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id31">2. è¿”å›å€¼ä¼˜äºå¯å˜å¼•ç”¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id32">3. ä½¿ç”¨æ–¹æ³•é“¾</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">4. é¿å…å…‹éš†</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id34">æ‰€æœ‰æƒé«˜çº§åº”ç”¨</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id35">é›¶æ‹·è´å­—ç¬¦ä¸²å¤„ç†</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36">å€Ÿç”¨æ£€æŸ¥å™¨å·¥ä½œåŸç†</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">æ‰€æœ‰æƒä¸é›†åˆ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id38">å†…å­˜å¸ƒå±€å¯¹æ¯”</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cow">Cowï¼ˆå†™æ—¶å…‹éš†ï¼‰</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">æ‰€æœ‰æƒè½¬ç§»æ¨¡å¼</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="02-basic-syntax.html">02-RuståŸºç¡€è¯­æ³•</a></li>
<li class="toctree-l2"><a class="reference internal" href="03-error-trait.html">03-é”™è¯¯å¤„ç†ã€æ³›å‹ä¸Trait</a></li>
<li class="toctree-l2"><a class="reference internal" href="04-concurrency-pointers.html">04-å¹¶å‘ä¸æ™ºèƒ½æŒ‡é’ˆ</a></li>
<li class="toctree-l2"><a class="reference internal" href="05-async.html">05-å¼‚æ­¥ç¼–ç¨‹</a></li>
<li class="toctree-l2"><a class="reference internal" href="06-troubleshooting.html">06-Rustç–‘éš¾è§£æ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell/index.html">Shell æ•™ç¨‹</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Backend Tutorial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Rust æ•™ç¨‹</a></li>
      <li class="breadcrumb-item active">01-Rustç¯å¢ƒæ­å»ºä¸æ‰€æœ‰æƒ</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/rust/01-environment-ownership.md.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="rust">
<h1>01-Rustç¯å¢ƒæ­å»ºä¸æ‰€æœ‰æƒ<a class="headerlink" href="#rust" title="Link to this heading">ïƒ</a></h1>
<p>Rustæ˜¯Mozillaäº2010å¹´å¯åŠ¨çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œ2015å¹´å‘å¸ƒ1.0ç‰ˆæœ¬ã€‚æ ¸å¿ƒç‰¹æ€§ï¼šå†…å­˜å®‰å…¨ã€é›¶æˆæœ¬æŠ½è±¡ã€å¹¶å‘å®‰å…¨ã€‚</p>
<section id="id1">
<h2>Rustç®€ä»‹<a class="headerlink" href="#id1" title="Link to this heading">ïƒ</a></h2>
<section id="id2">
<h3>è®¾è®¡ç›®æ ‡<a class="headerlink" href="#id2" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>å†…å­˜å®‰å…¨</strong>ï¼šæ— GCçš„å†…å­˜å®‰å…¨ï¼Œç¼–è¯‘æœŸæ£€æŸ¥</p></li>
<li><p><strong>å¹¶å‘å®‰å…¨</strong>ï¼šæ¶ˆé™¤æ•°æ®ç«äº‰ï¼Œç¼–è¯‘æœŸä¿è¯</p></li>
<li><p><strong>é›¶æˆæœ¬æŠ½è±¡</strong>ï¼šé«˜çº§ç‰¹æ€§æ— è¿è¡Œæ—¶å¼€é”€</p></li>
<li><p><strong>æ€§èƒ½</strong>ï¼šæ¥è¿‘C/C++</p></li>
<li><p><strong>ç”Ÿäº§åŠ›</strong>ï¼šç°ä»£å·¥å…·é“¾ã€åŒ…ç®¡ç†</p></li>
</ul>
</section>
<section id="id3">
<h3>åº”ç”¨åœºæ™¯<a class="headerlink" href="#id3" title="Link to this heading">ïƒ</a></h3>
<p><strong>ç³»ç»Ÿç¼–ç¨‹ï¼š</strong></p>
<ul class="simple">
<li><p>æ“ä½œç³»ç»Ÿå†…æ ¸ï¼ˆRedox OSï¼‰</p></li>
<li><p>åµŒå…¥å¼å¼€å‘</p></li>
<li><p>é©±åŠ¨ç¨‹åº</p></li>
</ul>
<p><strong>Webåç«¯ï¼š</strong></p>
<ul class="simple">
<li><p>é«˜æ€§èƒ½APIæœåŠ¡ï¼ˆActixã€Rocketï¼‰</p></li>
<li><p>WebAssemblyï¼ˆYewå‰ç«¯æ¡†æ¶ï¼‰</p></li>
<li><p>äº‘åŸç”Ÿå·¥å…·</p></li>
</ul>
<p><strong>å‘½ä»¤è¡Œå·¥å…·ï¼š</strong></p>
<ul class="simple">
<li><p>ripgrepï¼ˆæ–‡æœ¬æœç´¢ï¼‰</p></li>
<li><p>fdï¼ˆæ–‡ä»¶æŸ¥æ‰¾ï¼‰</p></li>
<li><p>batï¼ˆcatæ›¿ä»£å“ï¼‰</p></li>
<li><p>exaï¼ˆlsæ›¿ä»£å“ï¼‰</p></li>
</ul>
<p><strong>åŒºå—é“¾ï¼š</strong></p>
<ul class="simple">
<li><p>Polkadotã€Solanaã€NEAR</p></li>
</ul>
<p><strong>æ¸¸æˆå¼€å‘ï¼š</strong></p>
<ul class="simple">
<li><p>Bevyæ¸¸æˆå¼•æ“</p></li>
</ul>
</section>
<section id="id4">
<h3>è¯­è¨€ç‰¹ç‚¹<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h3>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul class="simple">
<li><p>å†…å­˜å®‰å…¨ï¼ˆæ— æ‚¬ç©ºæŒ‡é’ˆã€æ— æ•°æ®ç«äº‰ï¼‰</p></li>
<li><p>æ— GCï¼ˆå¯é¢„æµ‹æ€§èƒ½ï¼‰</p></li>
<li><p>å¼ºå¤§ç±»å‹ç³»ç»Ÿï¼ˆé›¶æˆæœ¬æŠ½è±¡ï¼‰</p></li>
<li><p>å¹¶å‘å®‰å…¨ï¼ˆSend/Sync traitï¼‰</p></li>
<li><p>ç°ä»£å·¥å…·é“¾ï¼ˆCargoã€rustfmtã€clippyï¼‰</p></li>
</ul>
<p><strong>åŠ£åŠ¿ï¼š</strong></p>
<ul class="simple">
<li><p>å­¦ä¹ æ›²çº¿é™¡å³­ï¼ˆæ‰€æœ‰æƒã€ç”Ÿå‘½å‘¨æœŸï¼‰</p></li>
<li><p>ç¼–è¯‘é€Ÿåº¦æ…¢</p></li>
<li><p>ç”Ÿæ€å°šä¸æˆç†Ÿï¼ˆç›¸æ¯”C++/Javaï¼‰</p></li>
<li><p>å¼€å‘é€Ÿåº¦æ…¢ï¼ˆä¸¥æ ¼ç¼–è¯‘å™¨ï¼‰</p></li>
</ul>
</section>
</section>
<section id="id5">
<h2>ç¯å¢ƒå®‰è£…<a class="headerlink" href="#id5" title="Link to this heading">ïƒ</a></h2>
<section id="rustup">
<h3>rustupï¼ˆæ¨èï¼‰<a class="headerlink" href="#rustup" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Linux/macOS</span>
curl<span class="w"> </span>--proto<span class="w"> </span><span class="s1">&#39;=https&#39;</span><span class="w"> </span>--tlsv1.2<span class="w"> </span>-sSf<span class="w"> </span>https://sh.rustup.rs<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Windows</span>
<span class="c1"># ä¸‹è½½ï¼šhttps://rustup.rs</span>
<span class="c1"># éœ€è¦Visual Studio C++æ„å»ºå·¥å…·</span>

<span class="c1"># éªŒè¯</span>
rustc<span class="w"> </span>--version
cargo<span class="w"> </span>--version

<span class="c1"># æ›´æ–°</span>
rustup<span class="w"> </span>update

<span class="c1"># å¸è½½</span>
rustup<span class="w"> </span>self<span class="w"> </span>uninstall
</pre></div>
</div>
</section>
<section id="id6">
<h3>å·¥å…·é“¾ç®¡ç†<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># æŸ¥çœ‹å·²å®‰è£…å·¥å…·é“¾</span>
rustup<span class="w"> </span>show

<span class="c1"># å®‰è£…ç¨³å®šç‰ˆ</span>
rustup<span class="w"> </span>install<span class="w"> </span>stable

<span class="c1"># å®‰è£…nightlyç‰ˆ</span>
rustup<span class="w"> </span>install<span class="w"> </span>nightly

<span class="c1"># åˆ‡æ¢é»˜è®¤å·¥å…·é“¾</span>
rustup<span class="w"> </span>default<span class="w"> </span>stable
rustup<span class="w"> </span>default<span class="w"> </span>nightly

<span class="c1"># é¡¹ç›®çº§å·¥å…·é“¾</span>
rustup<span class="w"> </span>override<span class="w"> </span><span class="nb">set</span><span class="w"> </span>nightly<span class="w">  </span><span class="c1"># å½“å‰ç›®å½•</span>

<span class="c1"># ç»„ä»¶ç®¡ç†</span>
rustup<span class="w"> </span>component<span class="w"> </span>add<span class="w"> </span>rustfmt<span class="w">      </span><span class="c1"># æ ¼å¼åŒ–å·¥å…·</span>
rustup<span class="w"> </span>component<span class="w"> </span>add<span class="w"> </span>clippy<span class="w">       </span><span class="c1"># lintå·¥å…·</span>
rustup<span class="w"> </span>component<span class="w"> </span>add<span class="w"> </span>rust-src<span class="w">     </span><span class="c1"># æ ‡å‡†åº“æºç </span>
rustup<span class="w"> </span>component<span class="w"> </span>add<span class="w"> </span>rust-analyzer<span class="w">  </span><span class="c1"># LSPæœåŠ¡å™¨</span>

<span class="c1"># ç›®æ ‡å¹³å°</span>
rustup<span class="w"> </span>target<span class="w"> </span>list
rustup<span class="w"> </span>target<span class="w"> </span>add<span class="w"> </span>x86_64-pc-windows-gnu<span class="w">  </span><span class="c1"># äº¤å‰ç¼–è¯‘</span>
</pre></div>
</div>
</section>
</section>
<section id="cargo">
<h2>CargoåŒ…ç®¡ç†<a class="headerlink" href="#cargo" title="Link to this heading">ïƒ</a></h2>
<section id="id7">
<h3>åŸºæœ¬å‘½ä»¤<a class="headerlink" href="#id7" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># åˆ›å»ºé¡¹ç›®</span>
cargo<span class="w"> </span>new<span class="w"> </span>myproject<span class="w">        </span><span class="c1"># äºŒè¿›åˆ¶é¡¹ç›®</span>
cargo<span class="w"> </span>new<span class="w"> </span>--lib<span class="w"> </span>mylib<span class="w">      </span><span class="c1"># åº“é¡¹ç›®</span>

<span class="c1"># æ„å»º</span>
cargo<span class="w"> </span>build<span class="w">                </span><span class="c1"># Debugæ„å»º</span>
cargo<span class="w"> </span>build<span class="w"> </span>--release<span class="w">      </span><span class="c1"># Releaseæ„å»ºï¼ˆä¼˜åŒ–ï¼‰</span>

<span class="c1"># è¿è¡Œ</span>
cargo<span class="w"> </span>run
cargo<span class="w"> </span>run<span class="w"> </span>--release

<span class="c1"># æµ‹è¯•</span>
cargo<span class="w"> </span><span class="nb">test</span>

<span class="c1"># æ£€æŸ¥ï¼ˆä¸ç”ŸæˆäºŒè¿›åˆ¶ï¼Œå¿«ï¼‰</span>
cargo<span class="w"> </span>check

<span class="c1"># æ ¼å¼åŒ–</span>
cargo<span class="w"> </span>fmt

<span class="c1"># Lint</span>
cargo<span class="w"> </span>clippy

<span class="c1"># æ–‡æ¡£</span>
cargo<span class="w"> </span>doc<span class="w"> </span>--open

<span class="c1"># æ¸…ç†</span>
cargo<span class="w"> </span>clean

<span class="c1"># æ›´æ–°ä¾èµ–</span>
cargo<span class="w"> </span>update

<span class="c1"># å‘å¸ƒåˆ°crates.io</span>
cargo<span class="w"> </span>publish
</pre></div>
</div>
</section>
<section id="cargo-toml">
<h3>Cargo.tomlé…ç½®<a class="headerlink" href="#cargo-toml" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[package]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myproject&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<span class="n">edition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2021&quot;</span><span class="w">       </span><span class="c1"># Rustç‰ˆæœ¬ï¼ˆ2015/2018/2021ï¼‰</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Your Name &lt;you@example.com&gt;&quot;</span><span class="p">]</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MIT&quot;</span>

<span class="k">[dependencies]</span>
<span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w">          </span><span class="c1"># æœ€æ–°1.xç‰ˆæœ¬</span>
<span class="n">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;full&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1"># å¯ç”¨ç‰¹æ€§</span>
<span class="n">rand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.8&quot;</span>

<span class="k">[dev-dependencies]</span><span class="w">     </span><span class="c1"># ä»…æµ‹è¯•/benchæ—¶ç”¨</span>
<span class="n">criterion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.4&quot;</span>

<span class="k">[build-dependencies]</span><span class="w">   </span><span class="c1"># æ„å»ºè„šæœ¬ä¾èµ–</span>
<span class="n">cc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>

<span class="k">[[bin]]</span><span class="w">                </span><span class="c1"># å¤šä¸ªäºŒè¿›åˆ¶</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;myapp&quot;</span>
<span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;src/main.rs&quot;</span>

<span class="k">[profile.release]</span><span class="w">      </span><span class="c1"># Releaseä¼˜åŒ–</span>
<span class="n">opt-level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">          </span><span class="c1"># ä¼˜åŒ–çº§åˆ«</span>
<span class="n">lto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">             </span><span class="c1"># é“¾æ¥æ—¶ä¼˜åŒ–</span>
<span class="n">codegen-units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">      </span><span class="c1"># å•ä¸€ä»£ç ç”Ÿæˆå•å…ƒ</span>
</pre></div>
</div>
</section>
</section>
<section id="id8">
<h2>å¼€å‘å·¥å…·<a class="headerlink" href="#id8" title="Link to this heading">ïƒ</a></h2>
<section id="vs-code">
<h3>VS Code<a class="headerlink" href="#vs-code" title="Link to this heading">ïƒ</a></h3>
<p><strong>å¿…è£…æ’ä»¶ï¼š</strong></p>
<ul class="simple">
<li><p>rust-analyzerï¼ˆå®˜æ–¹æ¨èï¼Œæ›¿ä»£rlsï¼‰</p></li>
<li><p>CodeLLDBï¼ˆè°ƒè¯•ï¼‰</p></li>
<li><p>cratesï¼ˆä¾èµ–ç‰ˆæœ¬æç¤ºï¼‰</p></li>
</ul>
<p><strong>é…ç½®ï¼ˆsettings.jsonï¼‰ï¼š</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;rust-analyzer.checkOnSave.command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;clippy&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;rust-analyzer.cargo.features&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;editor.formatOnSave&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="intellij-idea">
<h3>IntelliJ IDEA<a class="headerlink" href="#intellij-idea" title="Link to this heading">ïƒ</a></h3>
<p><strong>æ’ä»¶ï¼š</strong></p>
<ul class="simple">
<li><p>IntelliJ Rustï¼ˆJetBrainså®˜æ–¹ï¼‰</p></li>
</ul>
<p><strong>ç‰¹æ€§ï¼š</strong></p>
<ul class="simple">
<li><p>æ™ºèƒ½è¡¥å…¨</p></li>
<li><p>é‡æ„å·¥å…·</p></li>
<li><p>è°ƒè¯•å™¨</p></li>
<li><p>Cargoé›†æˆ</p></li>
</ul>
</section>
</section>
<section id="hello-world">
<h2>Hello World<a class="headerlink" href="#hello-world" title="Link to this heading">ïƒ</a></h2>
<section id="id9">
<h3>åŸºæœ¬ç¨‹åº<a class="headerlink" href="#id9" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// main.rs</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Hello, World!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ç¼–è¯‘è¿è¡Œ</span>
rustc<span class="w"> </span>main.rs
./main

<span class="c1"># æˆ–ä½¿ç”¨Cargo</span>
cargo<span class="w"> </span>new<span class="w"> </span>hello
<span class="nb">cd</span><span class="w"> </span>hello
cargo<span class="w"> </span>run
</pre></div>
</div>
</section>
<section id="id10">
<h3>é¡¹ç›®ç»“æ„<a class="headerlink" href="#id10" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>myproject/
â”œâ”€â”€ Cargo.toml          # é¡¹ç›®é…ç½®
â”œâ”€â”€ Cargo.lock          # ä¾èµ–é”å®šï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs         # äºŒè¿›åˆ¶å…¥å£
â”‚   â”œâ”€â”€ lib.rs          # åº“å…¥å£ï¼ˆå¦‚æœæ˜¯åº“ï¼‰
â”‚   â””â”€â”€ bin/            # å¤šä¸ªäºŒè¿›åˆ¶
â”‚       â””â”€â”€ another.rs
â”œâ”€â”€ tests/              # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ integration_test.rs
â”œâ”€â”€ benches/            # æ€§èƒ½æµ‹è¯•
â”‚   â””â”€â”€ benchmark.rs
â”œâ”€â”€ examples/           # ç¤ºä¾‹
â”‚   â””â”€â”€ example.rs
â””â”€â”€ target/             # æ„å»ºäº§ç‰©
    â”œâ”€â”€ debug/
    â””â”€â”€ release/
</pre></div>
</div>
</section>
</section>
<section id="id11">
<h2>æ‰€æœ‰æƒç³»ç»Ÿ<a class="headerlink" href="#id11" title="Link to this heading">ïƒ</a></h2>
<p>Rustæ ¸å¿ƒç‰¹æ€§ï¼Œç¼–è¯‘æœŸä¿è¯å†…å­˜å®‰å…¨ï¼Œæ— éœ€GCã€‚</p>
<section id="id12">
<h3>ä¸‰æ¡è§„åˆ™<a class="headerlink" href="#id12" title="Link to this heading">ïƒ</a></h3>
<ol class="arabic simple">
<li><p><strong>æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼ˆownerï¼‰</strong></p></li>
<li><p><strong>åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…</strong></p></li>
<li><p><strong>æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸï¼Œå€¼è¢«ä¸¢å¼ƒï¼ˆdropï¼‰</strong></p></li>
</ol>
</section>
<section id="move">
<h3>ç§»åŠ¨ï¼ˆMoveï¼‰<a class="headerlink" href="#move" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Stringæ˜¯å †åˆ†é…ï¼Œæ‰€æœ‰æƒä¼šè½¬ç§»</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span><span class="w">  </span><span class="c1">// s1çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°s2</span>

<span class="c1">// println!(&quot;{}&quot;, s1);  // âŒ ç¼–è¯‘é”™è¯¯ï¼šs1å·²å¤±æ•ˆ</span>

<span class="c1">// æ•´æ•°ç­‰åŸºæœ¬ç±»å‹æ˜¯Copyï¼Œä¸ä¼šç§»åŠ¨</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">  </span><span class="c1">// xä»æœ‰æ•ˆ</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w">  </span><span class="c1">// âœ“ OK</span>
</pre></div>
</div>
</section>
<section id="clone">
<h3>å…‹éš†ï¼ˆCloneï¼‰<a class="headerlink" href="#clone" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// æ·±æ‹·è´</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span><span class="w">  </span><span class="c1">// æ˜¾å¼å…‹éš†</span>

<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span><span class="w">  </span><span class="c1">// âœ“ ä¸¤è€…éƒ½æœ‰æ•ˆ</span>
</pre></div>
</div>
</section>
<section id="copy-trait">
<h3>Copy trait<a class="headerlink" href="#copy-trait" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// å®ç°Copyçš„ç±»å‹ï¼šæ•´æ•°ã€æµ®ç‚¹ã€å¸ƒå°”ã€å­—ç¬¦ã€å…ƒç»„ï¼ˆå…ƒç´ éƒ½æ˜¯Copyï¼‰</span>
<span class="c1">// ä¸èƒ½å®ç°Copyçš„ç±»å‹ï¼šStringã€Vecã€Boxç­‰å †åˆ†é…</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">      </span><span class="c1">// Copy</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">           </span><span class="c1">// å¤åˆ¶ï¼Œxä»æœ‰æ•ˆ</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// éCopy</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span><span class="w">         </span><span class="c1">// ç§»åŠ¨ï¼Œs1å¤±æ•ˆ</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id13">
<h3>å‡½æ•°å’Œæ‰€æœ‰æƒ<a class="headerlink" href="#id13" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">takes_ownership</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">  </span><span class="c1">// sçš„æ‰€æœ‰æƒç§»å…¥å‡½æ•°</span>
<span class="w">    </span><span class="c1">// println!(&quot;{}&quot;, s);  // âŒ é”™è¯¯ï¼šså·²å¤±æ•ˆ</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">makes_copy</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w">      </span><span class="c1">// xæ˜¯Copyï¼Œä¼ çš„æ˜¯å‰¯æœ¬</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w">  </span><span class="c1">// âœ“ xä»æœ‰æ•ˆ</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">takes_ownership</span><span class="p">(</span><span class="n">some_string</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">some_string</span><span class="p">);</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// some_stringç¦»å¼€ä½œç”¨åŸŸï¼Œè¢«drop</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">makes_copy</span><span class="p">(</span><span class="n">some_integer</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">some_integer</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id14">
<h3>è¿”å›å€¼å’Œæ‰€æœ‰æƒ<a class="headerlink" href="#id14" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gives_ownership</span><span class="p">();</span><span class="w">  </span><span class="c1">// æ‰€æœ‰æƒè½¬ç§»ç»™s1</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">takes_and_gives_back</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span><span class="w">  </span><span class="c1">// s2ç§»å…¥ï¼Œè¿”å›å€¼ç§»ç»™s3</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// println!(&quot;{}&quot;, s2);  // âŒ s2å·²å¤±æ•ˆ</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s3</span><span class="p">);</span><span class="w">  </span><span class="c1">// âœ“ s3æœ‰æ•ˆ</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">gives_ownership</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">some_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">some_string</span><span class="w">  </span><span class="c1">// è¿”å›ï¼Œæ‰€æœ‰æƒè½¬ç§»</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">takes_and_gives_back</span><span class="p">(</span><span class="n">a_string</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">a_string</span><span class="w">  </span><span class="c1">// è¿”å›ä¼ å…¥çš„å€¼</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id15">
<h2>å¼•ç”¨å’Œå€Ÿç”¨<a class="headerlink" href="#id15" title="Link to this heading">ïƒ</a></h2>
<p>ä¸è·å–æ‰€æœ‰æƒï¼Œåªå€Ÿç”¨ã€‚</p>
<section id="id16">
<h3>ä¸å¯å˜å¼•ç”¨<a class="headerlink" href="#id16" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_length</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">);</span><span class="w">  </span><span class="c1">// å€Ÿç”¨</span>
<span class="w">    </span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;&#39;{}&#39; çš„é•¿åº¦æ˜¯ {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w">  </span><span class="c1">// s1ä»æœ‰æ•ˆ</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">calculate_length</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">len</span><span class="p">()</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// sæ˜¯å¼•ç”¨ï¼Œä¸ä¼šdrop</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3>å¯å˜å¼•ç”¨<a class="headerlink" href="#id17" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">change</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">);</span><span class="w">  </span><span class="c1">// &quot;hello, world&quot;</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">change</span><span class="p">(</span><span class="n">some_string</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">some_string</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">&quot;, world&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id18">
<h3>å€Ÿç”¨è§„åˆ™<a class="headerlink" href="#id18" title="Link to this heading">ïƒ</a></h3>
<p><strong>æ ¸å¿ƒè§„åˆ™ï¼š</strong></p>
<ol class="arabic simple">
<li><p><strong>åŒä¸€æ—¶é—´ï¼Œè¦ä¹ˆä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆä»»æ„æ•°é‡ä¸å¯å˜å¼•ç”¨</strong></p></li>
<li><p><strong>å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆï¼ˆæ— æ‚¬ç©ºå¼•ç”¨ï¼‰</strong></p></li>
</ol>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// âŒ é”™è¯¯ï¼šåŒæ—¶å­˜åœ¨å¯å˜å’Œä¸å¯å˜å¼•ç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// é”™è¯¯ï¼</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">,</span><span class="w"> </span><span class="n">r3</span><span class="p">);</span>

<span class="c1">// âœ“ æ­£ç¡®ï¼šä¸å¯å˜å¼•ç”¨çš„ä½œç”¨åŸŸç»“æŸåå¯å˜å¼•ç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">);</span>
<span class="c1">// r1å’Œr2ä¸å†ä½¿ç”¨</span>

<span class="kd">let</span><span class="w"> </span><span class="n">r3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// âœ“ OK</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r3</span><span class="p">);</span>

<span class="c1">// âŒ é”™è¯¯ï¼šå¤šä¸ªå¯å˜å¼•ç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// é”™è¯¯ï¼</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">);</span>

<span class="c1">// âŒ é”™è¯¯ï¼šæ‚¬ç©ºå¼•ç”¨</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// ç¼–è¯‘é”™è¯¯</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">s</span><span class="w">  </span><span class="c1">// sç¦»å¼€ä½œç”¨åŸŸè¢«dropï¼Œå¼•ç”¨æ— æ•ˆ</span>
<span class="p">}</span>

<span class="c1">// âœ“ æ­£ç¡®ï¼šè¿”å›æ‰€æœ‰æƒ</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">no_dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">s</span><span class="w">  </span><span class="c1">// æ‰€æœ‰æƒç§»å‡º</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="slice">
<h2>åˆ‡ç‰‡ï¼ˆSliceï¼‰<a class="headerlink" href="#slice" title="Link to this heading">ïƒ</a></h2>
<p>å¼•ç”¨é›†åˆçš„ä¸€éƒ¨åˆ†ã€‚</p>
<section id="id19">
<h3>å­—ç¬¦ä¸²åˆ‡ç‰‡<a class="headerlink" href="#id19" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello world&quot;</span><span class="p">);</span>

<span class="kd">let</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">5</span><span class="p">];</span><span class="w">   </span><span class="c1">// &quot;hello&quot;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">6</span><span class="o">..</span><span class="mi">11</span><span class="p">];</span><span class="w">  </span><span class="c1">// &quot;world&quot;</span>

<span class="c1">// ç®€å†™</span>
<span class="kd">let</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="mi">5</span><span class="p">];</span><span class="w">    </span><span class="c1">// ä»å¼€å§‹</span>
<span class="kd">let</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">6</span><span class="o">..</span><span class="p">];</span><span class="w">    </span><span class="c1">// åˆ°ç»“å°¾</span>
<span class="kd">let</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="p">];</span><span class="w">     </span><span class="c1">// å…¨éƒ¨</span>

<span class="c1">// å­—ç¬¦ä¸²å­—é¢é‡æ˜¯åˆ‡ç‰‡</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, world!&quot;</span><span class="p">;</span><span class="w">  </span><span class="c1">// ç±»å‹ï¼š&amp;str</span>

<span class="c1">// å‡½æ•°å‚æ•°ç”¨&amp;stræ›´é€šç”¨ï¼ˆæ¥å—Stringå’Œ&amp;strï¼‰</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">();</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">enumerate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">b&#39; &#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">i</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="n">my_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello world&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first_word</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_string</span><span class="p">);</span><span class="w">  </span><span class="c1">// âœ“ Stringå¼•ç”¨</span>

<span class="kd">let</span><span class="w"> </span><span class="n">my_string_literal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello world&quot;</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first_word</span><span class="p">(</span><span class="n">my_string_literal</span><span class="p">);</span><span class="w">  </span><span class="c1">// âœ“ å­—ç¬¦ä¸²å­—é¢é‡</span>
</pre></div>
</div>
</section>
<section id="id20">
<h3>æ•°ç»„åˆ‡ç‰‡<a class="headerlink" href="#id20" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="kd">let</span><span class="w"> </span><span class="n">slice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">];</span><span class="w">  </span><span class="c1">// &amp;[i32]ç±»å‹</span>

<span class="fm">assert_eq!</span><span class="p">(</span><span class="n">slice</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]);</span>
</pre></div>
</div>
</section>
</section>
<section id="id21">
<h2>æ‰€æœ‰æƒæ¨¡å¼æ€»ç»“<a class="headerlink" href="#id21" title="Link to this heading">ïƒ</a></h2>
<section id="id22">
<h3>ä½•æ—¶ä½¿ç”¨<a class="headerlink" href="#id22" title="Link to this heading">ïƒ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>åœºæ™¯</p></th>
<th class="head"><p>æ–¹å¼</p></th>
<th class="head"><p>ç¤ºä¾‹</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>è½¬ç§»æ‰€æœ‰æƒ</p></td>
<td><p>å€¼</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">s2</span> <span class="pre">=</span> <span class="pre">s1;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>åªè¯»è®¿é—®</p></td>
<td><p>ä¸å¯å˜å¼•ç”¨</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;s</span></code></p></td>
</tr>
<tr class="row-even"><td><p>ä¿®æ”¹æ•°æ®</p></td>
<td><p>å¯å˜å¼•ç”¨</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;mut</span> <span class="pre">s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>ä¸ç¡®å®šç”Ÿå‘½å‘¨æœŸ</p></td>
<td><p>æ™ºèƒ½æŒ‡é’ˆ</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Box&lt;T&gt;</span></code>ã€<code class="docutils literal notranslate"><span class="pre">Rc&lt;T&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id23">
<h3>å¸¸è§é”™è¯¯<a class="headerlink" href="#id23" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// âŒ é”™è¯¯1ï¼šä½¿ç”¨å·²ç§»åŠ¨çš„å€¼</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">);</span><span class="w">  </span><span class="c1">// é”™è¯¯</span>

<span class="c1">// âœ“ è§£å†³ï¼šå…‹éš†æˆ–å€Ÿç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>

<span class="c1">// âŒ é”™è¯¯2ï¼šå¯å˜å¼•ç”¨å†²çª</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// é”™è¯¯</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">);</span>

<span class="c1">// âœ“ è§£å†³ï¼šåˆ†å¼€ä½œç”¨åŸŸ</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// r1ç¦»å¼€ä½œç”¨åŸŸ</span>
<span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>

<span class="c1">// âŒ é”™è¯¯3ï¼šæ‚¬ç©ºå¼•ç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="n">reference_to_nothing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dangle</span><span class="p">();</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">s</span><span class="w">  </span><span class="c1">// é”™è¯¯ï¼šè¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨</span>
<span class="p">}</span>

<span class="c1">// âœ“ è§£å†³ï¼šè¿”å›æ‰€æœ‰æƒ</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">no_dangle</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id24">
<h2>æ‰€æœ‰æƒçš„ä¼˜åŠ¿<a class="headerlink" href="#id24" title="Link to this heading">ïƒ</a></h2>
<section id="id25">
<h3>å†…å­˜å®‰å…¨<a class="headerlink" href="#id25" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// C++å¯èƒ½çš„å†…å­˜é—®é¢˜</span>
<span class="c1">// âŒ æ‚¬ç©ºæŒ‡é’ˆ</span>
<span class="n">int</span><span class="o">*</span><span class="w"> </span><span class="n">ptr</span><span class="p">;</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="w">    </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// xé”€æ¯</span>
<span class="c1">// *ptr;  // æœªå®šä¹‰è¡Œä¸º</span>

<span class="c1">// Rustç¼–è¯‘æœŸé˜»æ­¢</span>
<span class="c1">// fn main() {</span>
<span class="c1">//     let r;</span>
<span class="c1">//     {</span>
<span class="c1">//         let x = 5;</span>
<span class="c1">//         r = &amp;x;  // é”™è¯¯ï¼šxçš„ç”Ÿå‘½å‘¨æœŸä¸å¤Ÿé•¿</span>
<span class="c1">//     }</span>
<span class="c1">//     println!(&quot;{}&quot;, r);</span>
<span class="c1">// }</span>
</pre></div>
</div>
</section>
<section id="id26">
<h3>å¹¶å‘å®‰å…¨<a class="headerlink" href="#id26" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">thread</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// âŒ é”™è¯¯ï¼šä¸èƒ½åœ¨å¤šçº¿ç¨‹é—´å…±äº«å¯å˜å¼•ç”¨</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread</span><span class="p">::</span><span class="n">spawn</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">);</span><span class="w">  </span><span class="c1">// é”™è¯¯ï¼švå¯èƒ½è¢«ä¸»çº¿ç¨‹drop</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// drop(v);  // å¦‚æœå…è®¸ï¼Œä¼šå¯¼è‡´æ•°æ®ç«äº‰</span>
<span class="w">    </span><span class="n">handle</span><span class="p">.</span><span class="n">join</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// âœ“ æ­£ç¡®ï¼šè½¬ç§»æ‰€æœ‰æƒ</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">thread</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread</span><span class="p">::</span><span class="n">spawn</span><span class="p">(</span><span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">);</span><span class="w">  </span><span class="c1">// vçš„æ‰€æœ‰æƒç§»å…¥é—­åŒ…</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// println!(&quot;{:?}&quot;, v);  // é”™è¯¯ï¼švå·²ç§»èµ°</span>
<span class="w">    </span><span class="n">handle</span><span class="p">.</span><span class="n">join</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id27">
<h2>æ€§èƒ½<a class="headerlink" href="#id27" title="Link to this heading">ïƒ</a></h2>
<section id="id28">
<h3>é›¶æˆæœ¬æŠ½è±¡<a class="headerlink" href="#id28" title="Link to this heading">ïƒ</a></h3>
<p>æ‰€æœ‰æƒå’Œå€Ÿç”¨åœ¨ç¼–è¯‘æœŸæ£€æŸ¥ï¼Œè¿è¡Œæ—¶æ— å¼€é”€ã€‚</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// é«˜çº§æŠ½è±¡</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">numbers</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="kt">i32</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">numbers</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">sum</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">// ç¼–è¯‘åç­‰æ•ˆäºCçš„å¾ªç¯</span>
<span class="c1">// int sum = 0;</span>
<span class="c1">// for (int i = 0; i &lt; len; i++) {</span>
<span class="c1">//     sum += numbers[i];</span>
<span class="c1">// }</span>
</pre></div>
</div>
</section>
<section id="c">
<h3>ä¸C++å¯¹æ¯”<a class="headerlink" href="#c" title="Link to this heading">ïƒ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ç‰¹æ€§</p></th>
<th class="head"><p>Rust</p></th>
<th class="head"><p>C++</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>å†…å­˜å®‰å…¨</p></td>
<td><p>ç¼–è¯‘æœŸä¿è¯</p></td>
<td><p>è¿è¡Œæ—¶æ˜“é”™</p></td>
</tr>
<tr class="row-odd"><td><p>æ•°æ®ç«äº‰</p></td>
<td><p>ç¼–è¯‘æœŸé˜»æ­¢</p></td>
<td><p>è¿è¡Œæ—¶è°ƒè¯•</p></td>
</tr>
<tr class="row-even"><td><p>æ‚¬ç©ºæŒ‡é’ˆ</p></td>
<td><p>ä¸å¯èƒ½</p></td>
<td><p>å®¹æ˜“å‡ºç°</p></td>
</tr>
<tr class="row-odd"><td><p>æ™ºèƒ½æŒ‡é’ˆ</p></td>
<td><p>å†…ç½®æ‰€æœ‰æƒ</p></td>
<td><p>éœ€æ‰‹åŠ¨ç®¡ç†</p></td>
</tr>
<tr class="row-even"><td><p>æ€§èƒ½</p></td>
<td><p>é›¶æˆæœ¬æŠ½è±¡</p></td>
<td><p>é›¶æˆæœ¬æŠ½è±¡</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id29">
<h2>æœ€ä½³å®è·µ<a class="headerlink" href="#id29" title="Link to this heading">ïƒ</a></h2>
<section id="id30">
<h3>1. ä¼˜å…ˆå€Ÿç”¨<a class="headerlink" href="#id30" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// âŒ ä¸å¿…è¦çš„æ‰€æœ‰æƒè½¬ç§»</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// âœ“ åªè¯»ç”¨å¼•ç”¨</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id31">
<h3>2. è¿”å›å€¼ä¼˜äºå¯å˜å¼•ç”¨<a class="headerlink" href="#id31" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// âŒ ä¸å¤Ÿæ¸…æ™°</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">append</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">suffix</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="n">suffix</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// âœ“ æ›´å‡½æ•°å¼</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">append</span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">suffix</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="n">suffix</span><span class="p">);</span>
<span class="w">    </span><span class="n">s</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id32">
<h3>3. ä½¿ç”¨æ–¹æ³•é“¾<a class="headerlink" href="#id32" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// âœ“ æ¸…æ™°çš„æ‰€æœ‰æƒè½¬ç§»</span>
<span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">to_uppercase</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;HELLO&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;HI&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="id33">
<h3>4. é¿å…å…‹éš†<a class="headerlink" href="#id33" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// âŒ ä¸å¿…è¦çš„å…‹éš†</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
<span class="n">process</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s2</span><span class="p">);</span>

<span class="c1">// âœ“ ç›´æ¥å€Ÿç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s1</span><span class="p">;</span>
<span class="n">process</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="id34">
<h2>æ‰€æœ‰æƒé«˜çº§åº”ç”¨<a class="headerlink" href="#id34" title="Link to this heading">ïƒ</a></h2>
<section id="id35">
<h3>é›¶æ‹·è´å­—ç¬¦ä¸²å¤„ç†<a class="headerlink" href="#id35" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// âŒ å¤šæ¬¡æ‹·è´</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">process_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">trimmed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">trim</span><span class="p">().</span><span class="n">to_string</span><span class="p">();</span><span class="w">  </span><span class="c1">// æ‹·è´1</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">uppercase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trimmed</span><span class="p">.</span><span class="n">to_uppercase</span><span class="p">();</span><span class="w">  </span><span class="c1">// æ‹·è´2</span>
<span class="w">    </span><span class="n">uppercase</span>
<span class="p">}</span>

<span class="c1">// âœ… å‡å°‘æ‹·è´</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">process_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">data</span><span class="p">.</span><span class="n">trim</span><span class="p">().</span><span class="n">to_uppercase</span><span class="p">()</span><span class="w">  </span><span class="c1">// ä»…æœ€åç»“æœåˆ†é…</span>
<span class="p">}</span>

<span class="c1">// âœ… åŸåœ°ä¿®æ”¹</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">process_data_inplace</span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">trim</span><span class="p">().</span><span class="n">to_string</span><span class="p">();</span>
<span class="w">    </span><span class="n">data</span><span class="p">.</span><span class="n">make_ascii_uppercase</span><span class="p">();</span><span class="w">  </span><span class="c1">// åŸåœ°ä¿®æ”¹</span>
<span class="w">    </span><span class="n">data</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id36">
<h3>å€Ÿç”¨æ£€æŸ¥å™¨å·¥ä½œåŸç†<a class="headerlink" href="#id36" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// ç¼–è¯‘å™¨åˆ†æç¤ºä¾‹</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">example</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span><span class="w">        </span><span class="c1">// ä¸å¯å˜å€Ÿç”¨å¼€å§‹</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span><span class="w">        </span><span class="c1">// OKï¼šå¤šä¸ªä¸å¯å˜å€Ÿç”¨</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{} {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// r1ã€r2ä½œç”¨åŸŸç»“æŸ</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">    </span><span class="c1">// OKï¼šå¯å˜å€Ÿç”¨å¼€å§‹</span>
<span class="w">    </span><span class="n">r3</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">&quot; world&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r3</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// r3ä½œç”¨åŸŸç»“æŸ</span>
<span class="w">    </span>
<span class="p">}</span><span class="w"> </span><span class="c1">// sç¦»å¼€ä½œç”¨åŸŸï¼Œdrop</span>

<span class="c1">// éè¯æ³•ç”Ÿå‘½å‘¨æœŸï¼ˆNLLï¼‰</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">nll_example</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">;</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// r1æœ€åä½¿ç”¨ï¼Œç¼–è¯‘å™¨åˆ¤æ–­å…¶ç”Ÿå‘½å‘¨æœŸåˆ°æ­¤ç»“æŸ</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">  </span><span class="c1">// OKï¼šr1å·²ä¸å†ä½¿ç”¨</span>
<span class="w">    </span><span class="n">r2</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">&quot; world&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id37">
<h3>æ‰€æœ‰æƒä¸é›†åˆ<a class="headerlink" href="#id37" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Vecæ‰€æœ‰æƒ</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span>
<span class="w">    </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">),</span>
<span class="p">];</span>

<span class="c1">// âŒ é”™è¯¯ï¼šmoveå‘ç”Ÿ</span>
<span class="kd">let</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w">  </span><span class="c1">// Stringæœªå®ç°Copy</span>

<span class="c1">// âœ… æ–¹æ¡ˆ1ï¼šå…‹éš†</span>
<span class="kd">let</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">clone</span><span class="p">();</span>

<span class="c1">// âœ… æ–¹æ¡ˆ2ï¼šå¼•ç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="c1">// âœ… æ–¹æ¡ˆ3ï¼šç§»é™¤ï¼ˆè½¬ç§»æ‰€æœ‰æƒï¼‰</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">),</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">)];</span>
<span class="kd">let</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// âœ… æ–¹æ¡ˆ4ï¼šswap_removeï¼ˆO(1)ï¼‰</span>
<span class="kd">let</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">swap_remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// HashMapæ‰€æœ‰æƒ</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashMap</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="kd">let</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;blue&quot;</span><span class="p">);</span>

<span class="n">map</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="c1">// keyã€valueæ‰€æœ‰æƒå·²è½¬ç§»ï¼Œä¸å¯å†ç”¨</span>

<span class="c1">// âœ… ä½¿ç”¨å¼•ç”¨ä½œä¸ºé”®</span>
<span class="kd">let</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">map</span><span class="p">:</span><span class="w"> </span><span class="nc">HashMap</span><span class="o">&lt;&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashMap</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="n">map</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="o">&amp;</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// textä»å¯ç”¨</span>
</pre></div>
</div>
</section>
<section id="id38">
<h3>å†…å­˜å¸ƒå±€å¯¹æ¯”<a class="headerlink" href="#id38" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// æ ˆåˆ†é…ï¼ˆCopyç±»å‹ï¼‰</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">     </span><span class="c1">// æ ˆï¼š4å­—èŠ‚</span>
<span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">          </span><span class="c1">// å¤åˆ¶4å­—èŠ‚</span>

<span class="c1">// å †åˆ†é…ï¼ˆStringï¼‰</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="c1">// æ ˆï¼šptr(8å­—èŠ‚) + len(8å­—èŠ‚) + capacity(8å­—èŠ‚) = 24å­—èŠ‚</span>
<span class="c1">// å †ï¼š&quot;hello&quot;æ•°æ®</span>

<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span><span class="w">  </span><span class="c1">// ä»…å¤åˆ¶æ ˆä¸Š24å­—èŠ‚ï¼Œå †æ•°æ®ä¸å¤åˆ¶</span>

<span class="c1">// Box&lt;T&gt;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Box</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="c1">// æ ˆï¼šæŒ‡é’ˆ8å­—èŠ‚</span>
<span class="c1">// å †ï¼ši32å€¼4å­—èŠ‚</span>

<span class="c1">// å¯¹æ¯”</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// æ ˆ8å­—èŠ‚</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Data</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">v</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span><span class="w">      </span><span class="c1">// æ ˆ24å­—èŠ‚ + å †æ•°æ®</span>
</pre></div>
</div>
</section>
<section id="cow">
<h3>Cowï¼ˆå†™æ—¶å…‹éš†ï¼‰<a class="headerlink" href="#cow" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">borrow</span><span class="p">::</span><span class="n">Cow</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Cow</span><span class="o">&lt;</span><span class="kt">str</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&quot;bad&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// éœ€è¦ä¿®æ”¹ï¼Œåˆ†é…æ–°String</span>
<span class="w">        </span><span class="n">Cow</span><span class="p">::</span><span class="n">Owned</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;bad&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;good&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// æ— éœ€ä¿®æ”¹ï¼Œå€Ÿç”¨åŸå­—ç¬¦ä¸²</span>
<span class="w">        </span><span class="n">Cow</span><span class="p">::</span><span class="n">Borrowed</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello world&quot;</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">process</span><span class="p">(</span><span class="n">s1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Cow::Borrowedï¼Œé›¶æ‹·è´</span>

<span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bad word&quot;</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">process</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span><span class="w">  </span><span class="c1">// Cow::Ownedï¼Œä»…åœ¨éœ€è¦æ—¶åˆ†é…</span>
</pre></div>
</div>
</section>
<section id="id39">
<h3>æ‰€æœ‰æƒè½¬ç§»æ¨¡å¼<a class="headerlink" href="#id39" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// æ„å»ºå™¨æ¨¡å¼ï¼ˆæ¶ˆè€—selfï¼‰</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="n">port</span><span class="p">:</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">new</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;localhost&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="n">port</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">host</span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">host</span><span class="p">;</span>
<span class="w">        </span><span class="bp">self</span><span class="w">  </span><span class="c1">// è¿”å›æ‰€æœ‰æƒ</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">port</span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">port</span><span class="p">:</span><span class="w"> </span><span class="kt">u16</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">port</span><span class="p">;</span>
<span class="w">        </span><span class="bp">self</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// é“¾å¼è°ƒç”¨</span>
<span class="kd">let</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span><span class="p">::</span><span class="n">new</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="n">host</span><span class="p">(</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;example.com&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="n">port</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>

<span class="c1">// Optionçš„takeæ–¹æ³•</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">opt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">));</span>
<span class="kd">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">opt</span><span class="p">.</span><span class="n">take</span><span class="p">();</span><span class="w">  </span><span class="c1">// å–å‡ºå€¼ï¼Œoptå˜ä¸ºNone</span>
<span class="fm">assert_eq!</span><span class="p">(</span><span class="n">opt</span><span class="p">,</span><span class="w"> </span><span class="nb">None</span><span class="p">);</span>
<span class="fm">assert_eq!</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)));</span>

<span class="c1">// mem::replace</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">mem</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">::</span><span class="n">replace</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;world&quot;</span><span class="p">));</span>
<span class="c1">// sç°åœ¨æ˜¯&quot;world&quot;ï¼Œoldæ˜¯&quot;hello&quot;</span>

<span class="c1">// mem::takeï¼ˆé»˜è®¤å€¼æ›¿æ¢ï¼‰</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">opt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">::</span><span class="n">take</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">opt</span><span class="p">);</span><span class="w">  </span><span class="c1">// optå˜ä¸ºNoneï¼Œvæ˜¯Some(vec![1,2,3])</span>
</pre></div>
</div>
<p><strong>æ ¸å¿ƒï¼š</strong> æ‰€æœ‰æƒç³»ç»Ÿé€šè¿‡ç¼–è¯‘æœŸæ£€æŸ¥ä¿è¯å†…å­˜å®‰å…¨å’Œçº¿ç¨‹å®‰å…¨ï¼Œæ¶ˆé™¤æ‚¬ç©ºæŒ‡é’ˆã€æ•°æ®ç«äº‰ç­‰é—®é¢˜ã€‚</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="é¡µè„š">
        <a href="README.html" class="btn btn-neutral float-left" title="ğŸ¦€ Rust å¼€å‘" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
        <a href="02-basic-syntax.html" class="btn btn-neutral float-right" title="02-RuståŸºç¡€è¯­æ³•" accesskey="n" rel="next">ä¸‹ä¸€é¡µ <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ 2025, Code Dojoã€‚</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨çš„ 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a> å¼€å‘.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>